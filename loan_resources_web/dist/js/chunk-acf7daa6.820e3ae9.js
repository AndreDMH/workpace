(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-acf7daa6"],{"2f21":function(e,t,a){"use strict";var i=a("79e5");e.exports=function(e,t){return!!e&&i((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"3ce2":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flowData"},[a("d2-container",[a("template",{slot:"header"},[a("div",{staticClass:"flex ryt-right-top"},[a("div",{staticClass:"line_header"}),e._v(" 流量侧数据 ")]),a("div",[a("el-form",{ref:"form",attrs:{inline:!0,model:e.form,size:"small","label-width":"80px"}},[a("el-row",{staticClass:"dataScreen"},[a("el-button",{staticClass:"el-icon-refresh",staticStyle:{float:"right","margin-top":"30px"},attrs:{size:"small"},on:{click:e.refreshPageClick}},[e._v("刷新")]),a("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"0px"},attrs:{label:"流量平台","label-width":"80px",prop:"media_platform_name_arr"}},[a("el-select",{staticStyle:{width:"220px","margin-right":"20px"},attrs:{placeholder:"请选择流量平台",filterable:"",multiple:"","collapse-tags":""},on:{change:function(t){return e.filterMedia(t)}},model:{value:e.form.media_platform_name_arr,callback:function(t){e.$set(e.form,"media_platform_name_arr",t)},expression:"form.media_platform_name_arr"}},e._l(e.mediaPlatformArr,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,id:e.id}})})),1)],1),a("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"0px"},attrs:{label:"媒体名称","label-width":"80px",prop:"media_name_arr"}},[a("el-select",{staticStyle:{width:"220px","margin-right":"20px"},attrs:{placeholder:"请选择媒体",filterable:"",multiple:"","collapse-tags":""},on:{change:function(t){return e.filterPosition(t)}},model:{value:e.form.media_name_arr,callback:function(t){e.$set(e.form,"media_name_arr",t)},expression:"form.media_name_arr"}},e._l(e.mediaArr,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,id:e.id}})})),1)],1),a("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"0px"},attrs:{label:"广告位","label-width":"80px",prop:"position_name_arr"}},[a("el-select",{staticStyle:{width:"220px","margin-right":"20px"},attrs:{placeholder:"请选择广告位",filterable:"",multiple:"","collapse-tags":""},on:{change:function(t){return e.filterpos()}},model:{value:e.form.position_name_arr,callback:function(t){e.$set(e.form,"position_name_arr",t)},expression:"form.position_name_arr"}},e._l(e.positionArr,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"0px"},attrs:{label:"广告平台","label-width":"80px",prop:"platform_name_arr"}},[a("el-select",{staticStyle:{width:"220px","margin-right":"20px"},attrs:{placeholder:"请选择广告平台",filterable:"",multiple:"","collapse-tags":""},on:{change:function(t){return e.filterpos()}},model:{value:e.form.platform_name_arr,callback:function(t){e.$set(e.form,"platform_name_arr",t)},expression:"form.platform_name_arr"}},e._l(e.adPlatformArr,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"0px"},attrs:{label:"选择时间","label-width":"80px"}},[a("el-date-picker",{staticStyle:{width:"220px","margin-right":"20px"},attrs:{clearable:!1,type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":1==e.is_realTimeShow?e.pickerOptions:e.pickerOptionsO},on:{change:e.dateChange},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1)],1)],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.is_realTimeShow,expression:"is_realTimeShow"}],staticClass:"flowData_header_two"},[e._v(" 实时概览 ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.is_realTimeShow,expression:"is_realTimeShow"}],staticClass:"flowData_header_two_right"},[a("el-select",{staticClass:"ryt-select-right",staticStyle:{width:"150px"},attrs:{placeholder:"比率",filterable:"",size:"small"},on:{change:e.ratioChance},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e._l(e.ratioArray,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticClass:"configBtn",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.cinfigShow(1)}}},[e._v("配置")]),e.isDisable?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.isDisableFun("1")}}},[e._v("隐藏实时概览")]):e.isDisable?e._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.isDisableFun("2")}}},[e._v("显示实时概览")])],1),e.isDisable?a("div",{directives:[{name:"show",rawName:"v-show",value:e.is_realTimeShow,expression:"is_realTimeShow"}],staticClass:"flowData_view_one"},e._l(e.handleFlowViewDataList,(function(t,i){return a("div",{key:i,staticClass:"box"},[a("el-card",{staticClass:"view_item",attrs:{shadow:"always"}},[a("div",{staticClass:"cardName"},[e._v(e._s(t.name))]),a("div",{staticClass:"cardValue"},[e._v(e._s(t.value))]),t.ratioName?a("div",{staticClass:"cardInfor"},[e._v(" 环比 "+e._s(t.ratio)+" % "),t.ratio>0?a("i",{staticClass:"fa fa-arrow-up",staticStyle:{color:"red","margin-top":"2px","margin-left":"5px"},attrs:{"aria-hidden":"true"}}):e._e(),t.ratio<0?a("i",{staticClass:"fa fa-arrow-down",staticStyle:{color:"lightgreen","margin-left":"5px","margin-top":"4px"},attrs:{"aria-hidden":"true"}}):e._e()]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.ratioNames,expression:"item.ratioNames"}],staticClass:"cardInfor"},[e._v(" 同比 "+e._s(t.ratio)+"% "),t.ratio>0?a("i",{staticClass:"fa fa-arrow-up",staticStyle:{color:"red","margin-top":"2px","margin-left":"5px"},attrs:{"aria-hidden":"true"}}):e._e(),t.ratio<0?a("i",{staticClass:"fa fa-arrow-down",staticStyle:{color:"lightgreen","margin-left":"5px","margin-top":"4px"},attrs:{"aria-hidden":"true"}}):e._e()])])],1)})),0):e._e(),a("div",{staticClass:"flowData_header_three"},[a("div",{staticClass:"flowData_header_three_left"},[e.isDisableCharts?a("el-select",{staticClass:"ryt-select-right",staticStyle:{width:"150px","margin-right":"20px"},attrs:{placeholder:"选择指标",filterable:"",size:"small"},on:{change:e.selectIndexChangeOne},model:{value:e.selectIndexOne,callback:function(t){e.selectIndexOne=t},expression:"selectIndexOne"}},e._l(e.dataListTwo,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.key,disabled:e.disabled}})})),1):e._e(),e.isDisableCharts?a("el-checkbox",{staticStyle:{width:"33px"},attrs:{label:"对比","true-label":1,"false-label":0},on:{change:e.indexChange},model:{value:e.is_ratio,callback:function(t){e.is_ratio=t},expression:"is_ratio"}}):e._e(),e.isDisableCharts?a("el-select",{staticClass:"ryt-select-right",staticStyle:{width:"150px","margin-left":"40px"},attrs:{placeholder:"选择指标",disabled:e.isAbleIndex,filterable:"",size:"small"},on:{change:e.selectIndexChangeTwo},model:{value:e.selectIndexTwo,callback:function(t){e.selectIndexTwo=t},expression:"selectIndexTwo"}},e._l(e.otherSelectIndexList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.key,disabled:e.disabled}})})),1):e._e()],1),a("div",{staticClass:"flowData_header_three_right"},[e.isDisableCharts?a("el-date-picker",{staticStyle:{width:"245px","margin-right":"20px"},attrs:{clearable:!1,type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd ","value-format":"yyyy-MM-dd","picker-options":1==e.is_realTimeShow?e.pickerOptions:e.pickerOptionsO,size:"small"},on:{change:e.dateChange},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}}):e._e(),e.isDisableCharts?a("el-select",{staticClass:"ryt-select-right",staticStyle:{width:"150px","margin-right":"20px"},attrs:{placeholder:"时间单位",disabled:!e.is_realTimeShow,filterable:"",size:"small"},on:{change:e.timeTypeChange},model:{value:e.selectTimeType,callback:function(t){e.selectTimeType=t},expression:"selectTimeType"}},e._l(e.timeTypeArray,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1):e._e(),e.isDisableCharts?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.isDisableChartsFun("1")}}},[e._v("隐藏折线图")]):e.isDisableCharts?e._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.isDisableChartsFun("2")}}},[e._v("显示折线图")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDisableCharts,expression:"isDisableCharts"}],staticClass:"flowData_view_two"},[a("div",{staticClass:"chartStyle",attrs:{id:"myMediaChart"}})]),a("div",{staticClass:"flowData_header_four"},[a("div",{staticClass:"flowData_header_four_left"},[a("div",{staticClass:"flowData_header_four_left_one"},[e._v("数据列表")]),a("div",{staticClass:"dataReport_left_two"},[a("el-checkbox-group",{on:{change:function(t){return e.handleCheckedDatesChange()}},model:{value:e.checkListGroup,callback:function(t){e.checkListGroup=t},expression:"checkListGroup"}},e._l(e.checkList,(function(t,i){return a("el-checkbox",{key:t.key,staticStyle:{"margin-right":"3px"},attrs:{label:t.key}},[e._v(e._s(t.name))])})),1)],1)]),a("div",{staticClass:"flowData_header_four_right"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportBtn}},[a("d2-icon",{attrs:{name:"plus"}}),e._v("导出 ")],1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.cinfigShow(2)}}},[e._v("配置")])],1)]),a("el-table",{ref:"multipleSelection",staticStyle:{width:"100%"},attrs:{"max-height":"450",data:e.listDataArray,border:"",size:"medium","header-cell-style":{background:"#f5f5f5"},"row-class-name":e.tableRowClassName},on:{"sort-change":e.sortChange}},[1==e.is_date?a("el-table-column",{key:"1",attrs:{label:"日期",align:"center",fixed:"","min-width":"120",prop:"date"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date?t.row.date:"-"))]}}],null,!1,867059541)}):e._e(),1==e.is_hour?a("el-table-column",{attrs:{label:"小时",align:"center",fixed:"","min-width":"120",prop:"hour"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.hour+""?t.row.hour:"-"))]}}],null,!1,3472001630)}):e._e(),1==e.is_media_platform?a("el-table-column",{attrs:{label:"流量平台",align:"center",fixed:"",prop:"media_platform_name","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.media_platform_name?t.row.media_platform_name:"-"))]}}],null,!1,3147714933)}):e._e(),1==e.is_media?a("el-table-column",{attrs:{label:"媒体名称",align:"center",fixed:"",prop:"media_name","min-width":"120","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.media_name?t.row.media_name:"-"))]}}],null,!1,1847220501)}):e._e(),1==e.is_media_type?a("el-table-column",{attrs:{label:"媒体类型",align:"center",fixed:"",prop:"media_type","min-width":"120","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.media_type?t.row.media_type:"-"))]}}],null,!1,1783702965)}):e._e(),1==e.is_media_sale?a("el-table-column",{attrs:{label:"媒体侧结算方式",align:"center",fixed:"","min-width":"140",prop:"media_sale_type","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.media_sale_type?t.row.media_sale_type:"-"))]}}],null,!1,1359777973)}):e._e(),1==e.is_position?a("el-table-column",{attrs:{label:"广告位名称",align:"center",fixed:"",prop:"position_name","min-width":"120","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.position_name?t.row.position_name:"-"))]}}],null,!1,3532055349)}):e._e(),1==e.is_scenes?a("el-table-column",{attrs:{label:"广告位场景",align:"center",fixed:"",prop:"scenes_type","min-width":"120","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.scenes_type?t.row.scenes_type:"-"))]}}],null,!1,967134261)}):e._e(),1==e.is_platfrom?a("el-table-column",{attrs:{label:"广告平台",align:"center",fixed:"",prop:"platform_name","min-width":"120","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.platform_name?t.row.platform_name:"-"))]}}],null,!1,2762527797)}):e._e(),1==e.is_budget?a("el-table-column",{attrs:{label:"预算名称",align:"center",fixed:"","min-width":"120",prop:"budget_name","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.budget_name?t.row.budget_name:"-"))]}}],null,!1,2509762869)}):e._e(),1==e.is_platfrom_sale?a("el-table-column",{attrs:{label:"预算侧结算方式",align:"center",fixed:"","min-width":"140",prop:"budget_sale_type","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.budget_sale_type?t.row.budget_sale_type:"-"))]}}],null,!1,54101781)}):e._e(),e._l(e.showConfigData,(function(t){return a("el-table-column",{key:t.index,attrs:{label:t.name,prop:t.key,sortable:"custom","show-overflow-tooltip":"","min-width":"200px",align:"center","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row[""+t.key])+" ")]}}],null,!0)})}))],2),a("el-pagination",{staticStyle:{margin:"-10px"},attrs:{slot:"footer","current-page":e.listQuery.current,"page-size":e.listQuery.pageSize,total:e.total,"page-sizes":[10,20,40,60],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange},slot:"footer"})],2),e.dialogVisible?a("div",[a("selectDialog",{attrs:{dialogVisible:e.dialogVisible,dataLists:e.dialogDataList,selectColumnArr:e.selectColumnArr,isCanSave:e.isCanSave,saveName:e.saveColumnName},on:{clickPlay:e.clickPlay,handleClose:e.handleClose,clearAll:e.clearAll}})],1):e._e()],1)},r=[],s=(a("28a5"),a("55dd"),a("7f7f"),a("ac6a"),a("96cf"),a("3b8d")),n=a("56f1"),l={name:"flowData",components:{selectDialog:n["a"]},data:function(){return{pickerOptionsO:{disabledDate:function(e){return e.getTime()>Date.now()-864e5},shortcuts:[]},pickerOptions:{disabledDate:function(e){},shortcuts:[{text:"今日",onClick:function(e){var t=new Date,a=new Date;e.$emit("pick",[a,t])}},{text:"昨日",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",[t,t])}},{text:"本周",onClick:function(e){var t=new Date,a=new Date,i=t.getDay()||7;t.setTime(t.getTime()-864e5*(i-1)),e.$emit("pick",[t,a])}},{text:"上周",onClick:function(e){var t,a=new Date,i=a.getFullYear(),r=a.getMonth()+1,s=a.getDate();t=0==a.getDay()?new Date(i+"/"+r+"/"+s).getTime()-864e5*(a.getDay()+6):new Date(i+"/"+r+"/"+s).getTime()-864e5*(a.getDay()-1);var n=t-6048e5,l=t-864e5,o=new Date(n),c=new Date(l);e.$emit("pick",[o,c])}},{text:"本月",onClick:function(e){var t=new Date,a=new Date;a.setDate(1),e.$emit("pick",[a,t])}},{text:"上月",onClick:function(e){var t=new Date,a=new Date(t);a.setMonth(t.getMonth()),t.setMonth(t.getMonth()-1),a.setDate(0),t.setDate(1),e.$emit("pick",[t,a])}},{text:"最近七天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-5184e5),e.$emit("pick",[a,t])}},{text:"最近30天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}}]},timeTypeArray:[{value:1,label:"天"},{value:2,label:"小时"}],ratioArray:[{value:1,label:"环比"},{value:2,label:"同比"}],form:{media_platform_name_arr:[],media_name_arr:[],position_name_arr:[],platform_name_arr:[]},listQuery:{pageSize:10,current:1,sort:"",order:""},checkList:[],checkListGroup:[],total:0,isDisable:!1,isDisableCharts:!1,is_realTimeShow:!0,mediaPlatformArr:[],platformFilterArr:[],mediaArr:[],mediaFilterArr:[],positionArr:[],adPlatformArr:[],timeValue:[],is_ratio:"0",isAbleIndex:!0,chartData:{},otherSelectIndexList:[],selectValue:1,selectTimeType:1,is_compareTime:!0,showData:[],showColumnData:[],AllColumnData:[],handleFlowViewDataList:[],dataListTwo:[],selectIndexOne:"",selectIndexTwo:"",otherTimeDate:"",popoverVisible:!1,saveColumnList:[],listDataArray:[],showConfigData:[],is_date:0,is_hour:0,is_media_platform:0,is_media:0,is_media_type:0,is_media_sale:0,is_position:0,is_scenes:0,is_platfrom:0,is_budget:0,is_platfrom_sale:0,user_column_id:"",dialogVisible:!1,isCanSave:!0,isStyle:!0,dialogDataList:[],selectColumnArr:[],saveColumnName:""}},created:function(){this.getMediaPlatform(),this.getMedia(),this.getPosition(),this.getadPlatform(),this.getSevenDayDate(),this.initAllColumnTwo(),this.initAllColumn(),this.getcheckList(),this.fixedForm()},methods:{renderHeader:function(e,t){var a=t.column,i=[e(),e("div",{slot:"content"},"包括平台媒体和直媒")],r=[e(),e("div",{slot:"content"},"区分平台媒体和直媒")],s=[e(),e("div",{slot:"content"},"ssp的广告位")],n=[e(),e("div",{slot:"content"},"与ssp广告位场景一致")],l=[e(),e("div",{slot:"content"},"ssp的广告平台")],o=[e(),e("div",{slot:"content"},"与ssp中广告平台预算一致")],c=[e(),e("div",{slot:"content"},"与ssp中广告平台结算方式一致")],m=[e(),e("div",{slot:"content"},"与ssp中媒体的结算方式一致")],h=[e(),e("div",{slot:"content"},"媒体广告位发来的请求，包括有投放和无投放的")],u=[e(),e("div",{slot:"content"},"所有请求中，设备号为正常值的请求数")],d=[e(),e("div",{slot:"content"},"按请求的设备号去重数")],p=[e(),e("div",{slot:"content"},"请求数/请求独立设备数")],_=[e(),e("div",{slot:"content"},"有返回的请求次数")],f=[e(),e("div",{slot:"content"},"有返回的独立设备去重数")],g=[e(),e("div",{slot:"content"},"填充次数/填充独立设备去重数")],y=[e(),e("div",{slot:"content"},"填充次数/请求次数")],w=[e(),e("div",{slot:"content"},"出价胜出的次数")],v=[e(),e("div",{slot:"content"},"出价胜出的独立设备去重数")],b=[e(),e("div",{slot:"content"},"曝光数/曝光去重数")],x=[e(),e("div",{slot:"content"},"胜出/填充")],D=[e(),e("div",{slot:"content"},"点击次数/曝光次数")],C=[e(),e("div",{slot:"content"},"媒体dp次数/点击次数")],k=[e(),e("div",{slot:"content"},"暂无描述")];return e("div",[e("span",a.label),e("el-tooltip",{props:{placement:"bottom"}},["媒体名称"==a.label?i:"媒体类型"==a.label?r:"广告位名称"==a.label?s:"广告位场景"==a.label?n:"广告平台"==a.label?l:"预算名称"==a.label?o:"预算侧结算方式"==a.label?c:"媒体侧结算方式"==a.label?m:"请求次数"==a.label?h:"有设备号请求次数"==a.label?u:"请求独立设备去重数"==a.label?d:"平均每独立设备请求数"==a.label?p:"填充次数"==a.label?_:"填充独立设备去重数"==a.label?f:"平均每独立设备填充数"==a.label?g:"填充率"==a.label?y:"胜出次数"==a.label?w:"胜出去重数"==a.label?v:"每独立设备曝光数"==a.label?b:"胜出率"==a.label?x:"点击率"==a.label?D:"媒体dp率"==a.label?C:k,e("i",{class:"el-icon-question",style:"color:orange;margin-left:5px;"})])])},cinfigShow:function(e){1==e?(this.selectColumnArr=JSON.parse(JSON.stringify(this.showData)),this.dialogDataList=JSON.parse(JSON.stringify(this.AllData)),this.isCanSave=!1,this.isStyle=!1,this.openSelectDialog()):2==e&&(this.dialogDataList=JSON.parse(JSON.stringify(this.AllColumnData)),this.selectColumnArr=JSON.parse(JSON.stringify(this.showColumnData)),this.isCanSave=!1,this.isStyle=!0,this.openSelectDialog())},getcheckList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/columnList/groupFiled?directory_id=29");case 2:t=e.sent,a=t.data,i=a,i.forEach((function(e){r.checkList.push({key:e.key,name:e.name})}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCheckedDatesChange:function(){var e=this;this.is_date=0,this.is_hour=0,this.is_media_platform=0,this.is_media=0,this.is_media_type=0,this.is_media_sale=0,this.is_position=0,this.is_scenes=0,this.is_platfrom=0,this.is_budget=0,this.is_platfrom_sale=0,this.fixedForm(),this.checkListGroup.forEach((function(t){"date"==t?e.is_date=1:"hour"==t?e.is_hour=1:"media_platform_name"==t?e.is_media_platform=1:"media_name"==t?e.is_media=1:"media_type"==t?e.is_media_type=1:"media_sale_type"==t?e.is_media_sale=1:"position_name"==t?e.is_position=1:"scenes_type"==t?e.is_scenes=1:"platform_name"==t?e.is_platfrom=1:"budget_name"==t?e.is_budget=1:"budget_sale_type"==t&&(e.is_platfrom_sale=1)}))},isDisableFun:function(e){"1"==e?this.isDisable=!1:"2"==e&&(this.isDisable=!0)},isDisableChartsFun:function(e){"1"==e?this.isDisableCharts=!1:(e="2")&&(this.isDisableCharts=!0)},openSelectDialog:function(){this.dialogVisible=!0},handleSizeChange:function(e){this.listQuery.pageSize=e,this.listQuery.current=1,this.fixedForm()},handleCurrentChange:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listQuery.current=t,this.loading=!0,e.next=4,this.$http.post(this.baseUrl.ip1+"/traffic/data",{media_platform_name_arr:this.form.media_platform_name_arr,media_name_arr:this.form.media_name_arr,position_name_arr:this.form.position_name_arr,platform_name_arr:this.form.platform_name_arr,sort:this.listQuery.sort,field:this.listQuery.order,directory_id:29,start:this.timeValue[0],end:this.timeValue[1],limit:this.listQuery.pageSize,page:this.listQuery.current,group_columns:this.checkListGroup});case 4:a=e.sent,i=a.data,this.listDataArray=i.data,this.listQuery.current=i.current_page,this.listQuery.limit=i.per_page,this.total=i.total,this.gettotalData();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),clickPlay:function(e,t,a,i){if(this.selectColumnArr=JSON.parse(JSON.stringify(i)),0!=e){if(0==this.selectColumnArr.length)return void this.$message.info("没有选择列，不可以使用应用功能");var r={directory_id:"29",style:this.isStyle?"2":"1",show_column:this.selectColumnArr};t&&(r.name=a,r.id=this.saveColumnID),this.applySave(r,t)}this.dialogVisible=!1},applySave:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=a?this.baseUrl.ip1+"/columnList/common/save":this.baseUrl.ip1+"/columnList/save",e.next=3,this.$http.post(i,t);case 3:r=e.sent,r.data,this.refreshPageClick();case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),refreshPageClick:function(){this.initAllColumn(),this.fixedForm()},handleClose:function(){this.dialogVisible=!1},clearAll:function(){this.selectColumnArr=[]},ratioChance:function(e){this.selectValue=e,this.getFlowViewData()},timeCompares:function(e,t){var a,i,r,s;return a=e.split("-"),i=new Date(a[1]+"/"+a[2]+"/"+a[0]),a=t.split("-"),r=new Date(a[1]+"/"+a[2]+"/"+a[0]),s=parseInt(Math.abs(i-r)/1e3/60/60/24),s},firstComeLine:function(e){for(var t=[],a=0;a<this.otherSelectIndexList.length;a++){var i;i=this.otherSelectIndexList[a].key==e,t.push({key:this.otherSelectIndexList[a].key,label:this.otherSelectIndexList[a].label,disabled:i})}this.otherSelectIndexList=t,this.selectIndexOne=e},timeTypeChange:function(e){this.selectTimeType=e;var t=this.timeCompares(this.timeValue[1],this.timeValue[0]);1==e?this.is_compareTime=!0:(t>7&&(this.$message("按小时查看最多查看7天数据"),this.getSevenDayDate()),this.is_compareTime=!1),this.otherTimeDate="",this.getChartData()},initAllColumn:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/columnList?directory_id=29&style=1&is_group_field=0");case 2:t=e.sent,a=t.data,this.AllData=a.all_column,this.showData=a.show_column,this.initAllColumnBottom(),this.getFlowViewData(),this.getChartData();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initAllColumnBottom:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/columnList?directory_id=29&style=2&is_group_field=0");case 2:t=e.sent,a=t.data,this.showColumnData=JSON.parse(JSON.stringify(a.show_column)),this.showConfigData=a.show_column,console.log(this.showConfigData),this.AllColumnData=a.all_column;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fixedForm:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post(this.baseUrl.ip1+"/traffic/data",{media_platform_name_arr:this.form.media_platform_name_arr,media_name_arr:this.form.media_name_arr,position_name_arr:this.form.position_name_arr,platform_name_arr:this.form.platform_name_arr,sort:this.listQuery.sort,field:this.listQuery.order,directory_id:29,start:this.timeValue[0],end:this.timeValue[1],limit:this.listQuery.pageSize,page:this.listQuery.current,group_columns:this.checkListGroup});case 2:t=e.sent,a=t.data,this.listDataArray=a.data,this.listQuery.current=a.current_page,this.listQuery.limit=a.per_page,this.total=a.total,this.gettotalData();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),gettotalData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={media_platform_name_arr:this.form.media_platform_name_arr,media_name_arr:this.form.media_name_arr,position_name_arr:this.form.position_name_arr,platform_name_arr:this.form.platform_name_arr,sort:this.listQuery.sort,field:this.listQuery.order,directory_id:29,start:this.timeValue[0],end:this.timeValue[1],limit:this.listQuery.pageSize,page:this.listQuery.current,group_columns:this.checkListGroup},e.next=3,this.$http.post(this.baseUrl.ip1+"/traffic/total",t).then((function(e){200==e.code&&(1!=a.is_date&&1!=a.is_hour&&1!=a.is_media_platform&&1!=a.is_media&&1!=a.is_media_type&&1!=a.is_media_sale&&1!=a.is_position&&1!=a.is_scenes&&1!=a.is_platfrom&&1!=a.is_budget&&1!=a.is_platfrom_sale||a.listDataArray.unshift(e.data))}));case 3:e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),exportBtn:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post(this.baseUrl.ip1+"/traffic/excelData",{media_platform_name_arr:this.form.media_platform_name_arr,media_name_arr:this.form.media_name_arr,position_name_arr:this.form.position_name_arr,platform_name_arr:this.form.platform_name_arr,sort:this.listQuery.sort,field:this.listQuery.order,directory_id:29,start:this.timeValue[0],end:this.timeValue[1],limit:this.listQuery.pageSize,page:this.listQuery.current,group_columns:this.checkListGroup});case 2:t=e.sent,a=t.data,window.location.href=a.url;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getFlowViewData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,i,r,s,n,l,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post(this.baseUrl.ip1+"/traffic/realTimeData",{media_platform_name_arr:this.form.media_platform_name_arr,media_name_arr:this.form.media_name_arr,position_name_arr:this.form.position_name_arr,platform_name_arr:this.form.platform_name_arr,overview_type:this.selectValue});case 2:for(t=e.sent,a=t.data,i=new Array,r=0;r<this.showData.length;r++)s=this.showData[r].key,n=s+"_compare",l=1==this.selectValue,o=1!=this.selectValue,0==this.showData[r].is_group&&i.push({name:this.showData[r].name,value:a[s],ratio:a[n],ratioName:l,ratioNames:o});this.handleFlowViewDataList=i;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getChartData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectIndexOne||this.firstComeLine(this.dataListTwo[0].key),e.next=3,this.$http.post(this.baseUrl.ip1+"/traffic/chartData",{media_platform_name_arr:this.form.media_platform_name_arr,media_name_arr:this.form.media_name_arr,position_name_arr:this.form.position_name_arr,platform_name_arr:this.form.platform_name_arr,start:this.timeValue[0],end:this.timeValue[1],show_filed:this.selectIndexOne,is_ratio:this.is_ratio,ratio_filed:this.selectIndexTwo,time_type:this.selectTimeType,ratio_time:this.otherTimeDate});case 3:t=e.sent,a=t.data,this.chartData=a,this.drawLine();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),drawLine:function(){var e=[],t=[],a=[],i=[],r="",s="",n="",l="",o="",c="",m="",h="";for(var u in this.chartData.column_data)u==this.selectIndexOne?(e=this.chartData.column_data[u].one.data,r=this.chartData.column_data[u].one.max,m=this.chartData.column_data[u].one.avg,this.chartData.column_data[u].one.date&&(o=this.chartData.column_data[u].one.date),this.chartData.column_data[u].two&&(a=this.chartData.column_data[u].two.data,this.chartData.column_data[u].two.date&&(c=this.chartData.column_data[u].two.date))):u==this.selectIndexTwo&&(t=this.chartData.column_data[u].one.data,s=this.chartData.column_data[u].one.max,h=this.chartData.column_data[u].one.avg,this.chartData.column_data[u].two&&(i=this.chartData.column_data[u].two.data));for(var u in this.dataListTwo)this.dataListTwo[u].key==this.selectIndexOne?n=this.dataListTwo[u].label:this.dataListTwo[u].key==this.selectIndexTwo&&(l=this.dataListTwo[u].label);var d=this.$echarts.init(document.getElementById("myMediaChart")),p={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:[n,l],top:"0px"},dataZoom:[{},{}],toolbox:{feature:{dataZoom:{show:!1,yAxisIndex:"none"}}},xAxis:[{type:"category",data:this.chartData.abscissa}],yAxis:[{position:"left",type:"value",name:n,boundaryGap:!0,min:0,max:r,interval:m},{position:"right",type:"value",name:l,boundaryGap:!0,min:0,max:s,interval:h}],series:[{name:o+n,data:e,yAxisyAxis:0,yAxisIndex:0,type:"line"},{name:c+n,data:a,yAxisyAxis:0,yAxisIndex:0,type:"line"},{name:o+l,data:t,yAxisIndex:1,type:"line"},{name:c+l,data:i,yAxisIndex:1,type:"line"}]};d.setOption(p)},selectIndexChangeOne:function(e){for(var t=[],a=0;a<this.otherSelectIndexList.length;a++){var i;i=this.otherSelectIndexList[a].key==e,t.push({key:this.otherSelectIndexList[a].key,label:this.otherSelectIndexList[a].label,disabled:i})}this.otherSelectIndexList=t,this.selectIndexOne=e,this.getChartData()},selectIndexChangeTwo:function(e){for(var t=[],a=0;a<this.dataListTwo.length;a++){var i;i=this.dataListTwo[a].key==e,t.push({key:this.dataListTwo[a].key,label:this.dataListTwo[a].label,disabled:i})}this.dataListTwo=t,this.selectIndexTwo=e,this.getChartData()},indexChange:function(e){1==e?(this.is_ratio=e,this.isAbleIndex=!1):(this.is_ratio=e,this.isAbleIndex=!0,this.selectIndexTwo="",this.getChartData())},selectOtherDate:function(){},tableRowClassName:function(e){e.row;var t=e.rowIndex;return 0!==t||1!=this.is_date&&1!=this.is_hour&&1!=this.is_media_platform&&1!=this.is_media&&1!=this.is_media_type&&1!=this.is_media_sale&&1!=this.is_position&&1!=this.is_scenes&&1!=this.is_platfrom&&1!=this.is_budget&&1!=this.is_platfrom_sale?"":"success-row"},sortChange:function(e){console.log("prop",e.prop),e.prop&&("request_uv"==e.prop||"filling_uv"==e.prop||"beat_uv"==e.prop||"exposure_uv"==e.prop||"click_uv"==e.prop||"dp_uv"==e.prop||"request_avg"==e.prop||"filling_avg"==e.prop||"exposure_avg"==e.prop?this.$message.info("此列数据不可以进行排序！"):("ascending"==e.order?(this.listQuery.sort="asc",this.listQuery.order=e.prop):"descending"==e.order?(this.listQuery.sort="desc",this.listQuery.order=e.prop):null==e.order&&(this.listQuery.sort="",this.listQuery.order=""),this.fixedForm()))},dateChange:function(e){if(1==this.selectTimeType)this.timeValue=e;else{var t=this.timeCompares(e[1],e[0]);t>7?(this.getSevenDayDate(),this.$message("按小时查看最多查看7天数据")):this.timeValue=e}this.getChartData(),this.initAllColumn(),this.fixedForm()},getSevenDayDate:function(){var e=new Date,t=new Date;t.setTime(t.getTime()-6048e5);var a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),i=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();this.timeValue=[i,a]},initAllColumnTwo:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/columnList/chart?directory_id=29");case 2:t=e.sent,a=t.data,i=[],a.forEach((function(e){i.push({key:e.key,label:e.name})})),this.dataListTwo=i,this.otherSelectIndexList=i;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMediaPlatform:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/mediaPlatform/index");case 2:t=e.sent,a=t.data,i=a,i.forEach((function(e){r.mediaPlatformArr.push({label:e.media_platform_name,value:e.media_platform_name,id:e.id})}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),filterMedia:function(e){var t=this;this.platformFilterArr.splice(0,this.platformFilterArr.length),e.forEach((function(e){t.mediaPlatformArr.forEach((function(a){e==a.value&&t.platformFilterArr.push(a.id)}))}));var a=this.platformFilterArr.join(",");this.getMedia(a),this.initAllColumn(),this.fixedForm()},getMedia:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,i,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.mediaArr.splice(0,this.mediaArr.length),e.next=3,this.$http.get(this.baseUrl.ip1+"/getSelectMediaList",{params:{media_platform_id:t}});case 3:a=e.sent,i=a.data,r=i,r.forEach((function(e,t){s.mediaArr.push({value:e.media_name,label:e.media_name,id:e.id})}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),filterPosition:function(e){var t=this;this.mediaFilterArr.splice(0,this.mediaFilterArr.length),e.forEach((function(e){t.mediaArr.forEach((function(a){e==a.value&&t.mediaFilterArr.push(a.id)}))}));var a=this.mediaFilterArr.join(",");this.getPosition(a),this.initAllColumn(),this.fixedForm()},getPosition:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,i,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.positionArr.splice(0,this.positionArr.length),e.next=3,this.$http.get(this.baseUrl.ip1+"/getSelectPositionList",{params:{media_id:t}});case 3:a=e.sent,i=a.data,r=i,r.forEach((function(e,t){s.positionArr.push({value:e.media_position_name,label:e.media_position_name})}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),filterpos:function(){this.initAllColumn(),this.getChartData(),this.fixedForm()},getadPlatform:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/getSelectAdPlatformList");case 2:t=e.sent,a=t.data,i=a,i.forEach((function(e){r.adPlatformArr.push({value:e.platform_name,label:e.platform_name})}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},o=l,c=(a("5bc6"),a("2877")),m=function(e){e.options.__source="src/views/pages/dataFormReport/flowData/index.vue"},h=m,u=Object(c["a"])(o,i,r,!1,null,null,null);"function"===typeof h&&h(u);t["default"]=u.exports},"55dd":function(e,t,a){"use strict";var i=a("5ca1"),r=a("d8e8"),s=a("4bf8"),n=a("79e5"),l=[].sort,o=[1,2,3];i(i.P+i.F*(n((function(){o.sort(void 0)}))||!n((function(){o.sort(null)}))||!a("2f21")(l)),"Array",{sort:function(e){return void 0===e?l.call(s(this)):l.call(s(this),r(e))}})},"5bc6":function(e,t,a){"use strict";a("d684")},d684:function(e,t,a){}}]);
//# sourceMappingURL=chunk-acf7daa6.820e3ae9.js.map