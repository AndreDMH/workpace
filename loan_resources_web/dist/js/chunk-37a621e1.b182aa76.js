(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37a621e1"],{"8afe":function(e,t,i){},b2b8:function(e,t,i){"use strict";i("8afe")},b590:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"appAdmin"},[i("d2-container",[i("template",{slot:"header"},[i("div",{staticClass:"flex ryt-right-top"},[i("div",{staticClass:"line_header"}),e._v("应用列表 ")]),i("div",{staticClass:"medias_header"},[i("el-button",{staticStyle:{"margin-right":"8px","margin-left":"11px","margin-top":"11px"},attrs:{type:"primary",size:"mini"},on:{click:e.newButton}},[i("i",{staticClass:"el-icon-circle-plus-outline"},[e._v(" 新增应用")])]),i("el-popover",{attrs:{placement:"bottom-end",width:"160"},model:{value:e.visibleUp,callback:function(t){e.visibleUp=t},expression:"visibleUp"}},[i("p",[e._v("您确定启用该应用吗？")]),i("div",{staticStyle:{margin:"0","text-align":"right"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.cancelUp}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.upButton}},[e._v("确定")])],1),i("el-button",{staticStyle:{"margin-right":"8px"},attrs:{slot:"reference",size:"mini",disabled:0==e.forbidden},slot:"reference"},[i("d2-icon",{attrs:{name:"play"}}),e._v(" 启用 ")],1)],1),i("el-popover",{attrs:{placement:"bottom-end",width:"160"},model:{value:e.visibleDown,callback:function(t){e.visibleDown=t},expression:"visibleDown"}},[i("p",[e._v("您确定暂停该应用吗？")]),i("div",{staticStyle:{margin:"0","text-align":"right"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.cancelDown}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.downButton}},[e._v("确定")])],1),i("el-button",{attrs:{slot:"reference",size:"mini",disabled:0==e.paused},slot:"reference"},[i("d2-icon",{attrs:{name:"pause"}}),e._v(" 暂停 ")],1)],1),i("input",{attrs:{id:"uploadFild",name:"file",type:"file"},on:{change:e.inputExcel}}),i("button",{staticStyle:{height:"25px",background:"#409EFF"},attrs:{type:"primary",size:"mini",id:"uploadBtn"}},[i("d2-icon",{attrs:{name:"plus"}}),e._v(" 导 入 ")],1),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.downloadExcel}},[e._v("下载模板")]),i("el-form",{directives:[{name:"show",rawName:"v-show",value:!e.isOpen,expression:"!isOpen"}],ref:"form",staticStyle:{"margin-right":"0px","margin-top":"-32px","margin-bottom":"-10px","margin-left":"11px"},attrs:{inline:!0,model:e.form,size:"mini"}},[i("el-row",{staticStyle:{"margin-top":"50px"}},[i("el-form-item",{attrs:{label:"",prop:"media_status"}},[i("span",{staticClass:"ryt-select-text"},[e._v("状态：")]),i("el-select",{staticClass:"ryt-select-left3",staticStyle:{width:"180px"},attrs:{placeholder:"请选择状态"},on:{change:function(t){return e.changeStatus()}},model:{value:e.form.media_status,callback:function(t){e.$set(e.form,"media_status",t)},expression:"form.media_status"}},e._l(e.stateFilters,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"",prop:"media_platform_id_arr"}},[i("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择平台名称",filterable:"",multiple:"","collapse-tags":""},on:{change:function(t){return e.changeStatus()}},model:{value:e.form.media_platform_id_arr,callback:function(t){e.$set(e.form,"media_platform_id_arr",t)},expression:"form.media_platform_id_arr"}},e._l(e.trafficPlatformArr,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"",prop:"media_name"}},[i("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入应用名称"},on:{change:e.nameChange},model:{value:e.form.media_name,callback:function(t){e.$set(e.form,"media_name",t)},expression:"form.media_name"}}),i("i",{staticClass:"fa fa-search ryt-search-icon",attrs:{"aria-hidden":"true"}})],1)],1)],1)],1)]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"-20px"},attrs:{data:e.currentTableData,size:"medium",border:"","header-cell-style":{background:"#f5f5f5"}},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),i("el-table-column",{attrs:{label:"应用名称",align:"center",prop:"media_name","min-width":"150",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{attrs:{trigger:"hover",placement:"top"}},[i("p",[e._v("应用id："+e._s(t.row.id)+" "),i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.row.id,expression:"scope.row.id",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],attrs:{type:"text",size:"mini"}},[e._v("复制")])],1),i("p",[e._v("应用code："+e._s(t.row.media_code)+" "),i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.row.media_code,expression:"scope.row.media_code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],attrs:{type:"text",size:"mini"}},[e._v("复制")])],1),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.media_name))])])]}}])}),i("el-table-column",{attrs:{label:"状态","min-width":"100",align:"center",prop:"media_status","column-key":"media_status"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#409EFF","inactive-color":"#DEDEDE"},on:{change:function(i){return e.switchChange(t.row,i)}},model:{value:t.row.media_status,callback:function(i){e.$set(t.row,"media_status",i)},expression:"scope.row.media_status"}})]}}])}),i("el-table-column",{attrs:{label:"所属平台",align:"center",prop:"media_platform_name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.media_platform_name)+" ")]}}])}),i("el-table-column",{attrs:{label:"广告位",align:"center",prop:"media_position_count","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[0==t.row.media_position_count?i("div",{staticStyle:{"margin-right":"6px",width:"38px"}},[e._v(e._s(t.row.media_position_count)+"(个)")]):i("div",[i("el-button",{staticStyle:{"margin-right":"6px",width:"38px",color:"#409EFF"},attrs:{type:"text",size:"medium"},on:{click:function(i){return e.positionOut(t.row)}}},[e._v(e._s(t.row.media_position_count)+"(个)")])],1),i("i",{staticClass:"el-icon-circle-plus-outline",staticStyle:{color:"#409EFF","font-size":"13px","margin-left":"18px"},attrs:{"aria-hidden":"true"},on:{click:function(i){return e.adSenses(t.row)}}},[e._v("添加")])])]}}])}),i("el-table-column",{attrs:{label:"创建时间",align:"center","min-width":"180",prop:"created_at"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.created_at))]}}])}),i("el-table-column",{attrs:{label:"最后修改时间",align:"center","min-width":"180",prop:"updated_at"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.updated_at))]}}])}),i("el-table-column",{attrs:{label:"操作",width:"100",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(i){return e.handleClick(t.row)}}},[e._v("编辑")])]}}])})],1),i("el-pagination",{staticStyle:{margin:"-10px"},attrs:{slot:"footer","current-page":e.listQuery.current,"page-size":e.listQuery.pageSize,total:e.total,"page-sizes":[10,20,40,60],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange},slot:"footer"})],2)],1)},r=[],n=(i("7f7f"),i("ac6a"),i("96cf"),i("3b8d")),s=i("c276"),o={name:"medias",data:function(){return{drawer:!1,isOpen:!1,form:{media_name:"",media_code:"",media_status:"",platform_arr:[],operation_arr:[],business_arr:[],media_platform_id_arr:[]},adPowerData_wharf:{},loading:!1,currentTableData:[],listQuery:{columns:"",orders:"",pageSize:10,current:1},total:0,stateFilters:[{label:"全部",value:""},{label:"启用",value:1},{label:"暂停",value:2}],typeFilters:[{label:"异业",value:1},{label:"同业",value:2},{label:"程序化",value:3}],platformArr:[],trafficPlatformArr:[],operationFilters:[],businessFilters:[],infoDelete:[],idlist:[],visibleDete:!1,visibleUp:!1,visibleDown:!1,forbidden:!1,deteleOut:!1,paused:!1}},created:function(){try{this.adPowerData_wharf=JSON.parse(s["a"].cookies.get("adPowerData_wharf"))}catch(e){}console.log("权限：",s["a"].cookies.get("adPowerData_wharf")),this.getMediasList(),this.getMediaPlatform()},mounted:function(){},methods:{onCopy:function(){this.$message({type:"info",message:"复制成功"})},downloadExcel:function(){var e=this.baseUrl.ip1+"/sourceSys/media/getHeader",t="";t=s["a"].cookies.get("token_wharf"),window.location.href=e+"?token="+t},inputExcel:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var i,a,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("上传的数据",t),i=new FormData,a=t.target.files[0],i.append("file",a),r={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0},this.loading=!0,e.next=8,this.$http.post(this.baseUrl.ip1+"/sourceSys/media/excelLoadMedia",i,r).then((function(e){200==e.code?(n.getMediasList(),n.$message.success("导入成功"),n.loading=!1):n.loading=!1}));case 8:e.sent,t.target.value="";case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getMediaPlatform:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/sourceSys/options/mediaPlatform");case 2:t=e.sent,i=t.data,a=i,a.forEach((function(e){n.trafficPlatformArr.push({label:e.media_platform_name,value:e.id})})),void 0==this.$route.query.media_platform_id||(r=[],r.push(this.$route.query.media_platform_id),this.form.media_platform_id_arr=r,this.getMediasList());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getOperation:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/operation/list");case 2:t=e.sent,i=t.data,a=i,a.forEach((function(e,t){r.operationFilters.push({operation_name:e.name,operation_id:e.id})}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getBusiness:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/business/list");case 2:t=e.sent,i=t.data,a=i,a.forEach((function(e,t){r.businessFilters.push({business_name:e.name,business_id:e.id})}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMediasList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t=this.baseUrl.ip1+"/sourceSys/media/getMediasList",i={media_style:2,limit:this.listQuery.pageSize,page:1,media_name:this.form.media_name,media_platform_id_arr:this.form.media_platform_id_arr,media_status:this.form.media_status},e.next=5,this.$http.post(t,i);case 5:a=e.sent,r=a.data,this.currentTableData=r.data,this.listQuery.current=r.current_page,this.listQuery.limit=r.per_page,this.total=r.total,this.loading=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),newButton:function(){this.$router.push({name:"editMedias",query:{type:"1"}})},nameChange:function(e){this.form.media_name=e,this.getMediasList()},changeStatus:function(){this.getMediasList()},deleteButton:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.visibleDete=!1,t={media_id_arr:this.idlist},i=this.baseUrl.ip1+"/sourceSys/media/delMedia",e.next=5,this.$http.post(i,t);case 5:a=e.sent,200==a.code&&this.$message.success("删除成功"),this.getMediasList();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelDelete:function(){this.visibleDete=!1,this.$message.error("取消删除操作")},upButton:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.visibleUp=!1,t={media_id_arr:this.idlist,media_status:"1"},i=this.baseUrl.ip1+"/sourceSys/media/upMediaStatus",e.next=5,this.$http.post(i,t);case 5:a=e.sent,a.data,this.$message.success("启用成功"),this.getMediasList();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelUp:function(){this.visibleUp=!1,this.$message.error("取消启用操作")},drawerTrue:function(){this.getMediasList(),this.drawer=!1},clearDrawer:function(){this.$refs.drawerForm.resetFields(),this.getMediasList()},downButton:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.visibleDown=!1,t={media_id_arr:this.idlist,media_status:"2"},e.next=4,this.$http.post(this.baseUrl.ip1+"/sourceSys/media/upMediaStatus",t);case 4:i=e.sent,a=i.data,r=a.isOperate,1==r?this.$confirm("此操作将导致投放暂停，是否继续","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"confirm"==t?s.putIn():s.$message.error("取消暂停操作");case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}):this.putIn();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelDown:function(){this.visibleDown=!1,this.$message.error("取消暂停操作")},putIn:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={media_id_arr:this.idlist,media_status:"2"},i=this.baseUrl.ip1+"/sourceSys/media/upMediaStatus",e.next=4,this.$http.post(i,t);case 4:a=e.sent,a.data,this.$message.success("暂停成功"),this.getMediasList();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),switchChange:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,i){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t,i,this.idlist),a=this,r=[],r.push(t.id),n={media_status:i,media_id_arr:r},e.next=7,this.$http.post(this.baseUrl.ip1+"/sourceSys/media/upMediaStatus",n).then((function(e){200==e.code?(a.$message.success("状态修改成功"),this.getMediasList()):this.getMediasList()}));case 7:e.sent;case 8:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),handleSelectionChange:function(e){var t=this;this.infoDelete=e;var i=[];this.infoDelete.map((function(e){i.push(e.id)})),this.idlist=i;var a=!1,r=!1;e.length>0?e.forEach((function(e){1==e.media_status&&(a=!0),2==e.media_status&&(r=!0),a&&r?(t.forbidden=!0,t.deteleOut=!1,t.paused=!0):a?(t.forbidden=!1,t.deteleOut=!1,t.paused=!0):r?(t.forbidden=!0,t.deteleOut=!0,t.paused=!1):(t.forbidden=!0,t.deteleOut=!0,t.paused=!0)})):(this.forbidden=!1,this.deteleOut=!1,this.paused=!1)},positionOut:function(e){this.$router.push({path:"adsenseList",query:{id:e.id,where:"mediaList"}})},adSenses:function(e){this.$router.push({path:"adsenseList/editAdsenseList",query:{id:e.id,type:"1",where:"mediaList",media_platform_id:e.media_platform_id}})},operatesOut:function(e){this.$router.push({path:"/launchManage/mediaAdLaunch",query:{id:e.id,type:"1"}})},handleClick:function(e){this.$router.push({path:"mediaList/editMedias",query:{id:e.id,type:"2"}})},handleSizeChange:function(e){this.listQuery.pageSize=e,this.getMediasList()},handleCurrentChange:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var i,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listQuery.current=t,this.loading=!0,i={limit:this.listQuery.pageSize,page:this.listQuery.current,media_name:this.form.media_name,media_platform_id_arr:this.form.media_platform_id_arr,media_status:this.form.media_status},e.next=5,this.$http.post(this.baseUrl.ip1+"/sourceSys/media/getMediasList",i);case 5:a=e.sent,r=a.data,this.currentTableData=r.data,this.listQuery.current=r.current_page,this.listQuery.limit=r.per_page,this.total=r.total,this.loading=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},l=o,c=(i("b2b8"),i("2877")),u=function(e){e.options.__source="src/views/pages/mediaManage/mediaList/index.vue"},d=u,p=Object(c["a"])(l,a,r,!1,null,null,null);"function"===typeof d&&d(p);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-37a621e1.b182aa76.js.map