(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e64b4"],{"97aa":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("d2-container",[i("template",{slot:"header"},[i("div",{staticClass:"flex ryt-right-top"},[i("div",{staticClass:"line_header"}),"1"==e.pageType?i("div",[e._v("新建应用")]):"2"==e.pageType?i("div",{staticClass:"line_title"},[e._v(" 编辑应用 ")]):e._e()])]),i("div",{staticClass:"mediasInfo"},[i("p",{staticStyle:{"padding-left":"10px","margin-top":"-10px"}},[e._v("基础信息")]),i("el-form",{ref:"mainForm",attrs:{model:e.mainForm,"label-width":"240px",rules:e.rytproject,size:"mini"}},[i("el-form-item",{attrs:{label:"应用名称",prop:"media_name"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请填写应用名称"},model:{value:e.mainForm.media_name,callback:function(t){e.$set(e.mainForm,"media_name",t)},expression:"mainForm.media_name"}})],1),i("el-form-item",{attrs:{label:"所属平台",prop:"media_platform_id"}},[i("el-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请填写所属平台"},model:{value:e.mainForm.media_platform_id,callback:function(t){e.$set(e.mainForm,"media_platform_id",t)},expression:"mainForm.media_platform_id"}},e._l(e.paltformNameArr,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"投放类型",prop:"put_type"}},[i("el-radio-group",{staticStyle:{width:"220px"},model:{value:e.mainForm.put_type,callback:function(t){e.$set(e.mainForm,"put_type",t)},expression:"mainForm.put_type"}},[i("el-radio-button",{attrs:{label:"1"}},[e._v("内部投放")]),i("el-radio-button",{attrs:{label:"2"}},[e._v("外部投放")])],1)],1),i("el-form-item",{attrs:{label:"是否缓存",prop:"is_media_cache"}},[i("el-radio-group",{staticStyle:{width:"220px"},model:{value:e.mainForm.is_media_cache,callback:function(t){e.$set(e.mainForm,"is_media_cache",t)},expression:"mainForm.is_media_cache"}},[i("el-radio-button",{attrs:{label:"0"}},[e._v("否")]),i("el-radio-button",{attrs:{label:"1"}},[e._v("是")])],1)],1),i("el-form-item",{attrs:{label:"对接方式",prop:"business_type"}},[i("el-radio-group",{staticStyle:{width:"220px"},attrs:{disabled:"2"==e.pageType},on:{change:function(t){return e.changeDockingMode(t)}},model:{value:e.mainForm.business_type,callback:function(t){e.$set(e.mainForm,"business_type",t)},expression:"mainForm.business_type"}},[i("el-radio-button",{attrs:{label:"1"}},[e._v("API")]),i("el-radio-button",{attrs:{label:"2"}},[e._v("H5")])],1)],1),1==e.mainForm.business_type?i("el-form-item",{attrs:{label:"对接协议",prop:"business_schema"}},[i("el-radio-group",{staticStyle:{width:"220px"},attrs:{disabled:"2"==e.pageType},on:{change:function(t){return e.changeDockingProtocol(t)}},model:{value:e.mainForm.business_schema,callback:function(t){e.$set(e.mainForm,"business_schema",t)},expression:"mainForm.business_schema"}},[i("el-radio-button",{attrs:{label:"1"}},[e._v("OPEN-RTB")]),i("el-radio-button",{attrs:{label:"2"}},[e._v("API金融")])],1)],1):e._e(),i("el-form-item",{attrs:{label:"结算方式",prop:"bill_type"}},[i("el-radio-group",{on:{change:function(t){return e.changgeBillType(t)}},model:{value:e.mainForm.bill_type,callback:function(t){e.$set(e.mainForm,"bill_type",t)},expression:"mainForm.bill_type"}},[1==e.mainForm.business_schema&&1==e.mainForm.business_type?i("el-radio-button",{attrs:{label:"1"}},[e._v("CPM")]):e._e(),i("el-radio-button",{attrs:{label:"2"}},[e._v("CPC")]),i("el-radio-button",{attrs:{label:"3"}},[e._v("CPA")]),i("el-radio-button",{attrs:{label:"4"}},[e._v("CPS")]),i("el-radio-button",{attrs:{label:"5"}},[e._v("CPD")])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.mainForm.business_type&&1!=e.mainForm.business_schema||2==e.mainForm.business_type,expression:"(mainForm.business_type==1&&mainForm.business_schema!=1)||mainForm.business_type==2"}]},[2==e.mainForm.bill_type?i("el-form-item",{attrs:{label:"计费节点"}},[i("el-button",{attrs:{type:"info"}},[e._v("点击")])],1):3==e.mainForm.bill_type?i("el-form-item",{attrs:{label:"计费节点"}},[i("el-button",{attrs:{type:"info"}},[e._v("授信")])],1):4==e.mainForm.bill_type?i("el-form-item",{attrs:{label:"分成节点"}},[i("el-button",{attrs:{type:"info"}},[e._v("收益分成")])],1):i("el-form-item",{attrs:{label:"计费周期",prop:"toll_cycle"}},[i("el-radio-group",{model:{value:e.mainForm.toll_cycle,callback:function(t){e.$set(e.mainForm,"toll_cycle",t)},expression:"mainForm.toll_cycle"}},[i("el-radio-button",{attrs:{label:"1"}},[e._v("天")]),i("el-radio-button",{attrs:{label:"2"}},[e._v("周")]),i("el-radio-button",{attrs:{label:"3"}},[e._v("月")])],1)],1),2==e.mainForm.bill_type?i("el-form-item",{attrs:{label:"CPC是否去重",prop:"cpc_uniq"}},[i("el-radio-group",{model:{value:e.mainForm.cpc_uniq,callback:function(t){e.$set(e.mainForm,"cpc_uniq",t)},expression:"mainForm.cpc_uniq"}},[i("el-radio-button",{attrs:{label:"0"}},[e._v("否")]),i("el-radio-button",{attrs:{label:"1"}},[e._v("是")])],1)],1):e._e()],1),1==e.mainForm.business_schema&&1==e.mainForm.bill_type&&1==e.mainForm.business_type?i("el-form-item",{attrs:{label:"交易方式",prop:"sale_type"}},[i("el-radio-group",{model:{value:e.mainForm.sale_type,callback:function(t){e.$set(e.mainForm,"sale_type",t)},expression:"mainForm.sale_type"}},[i("el-radio-button",{attrs:{label:"1"}},[e._v("RTB")]),i("el-radio-button",{attrs:{label:"2"}},[e._v("PD")]),i("el-radio-button",{attrs:{label:"3"}},[e._v("PDB")])],1)],1):e._e(),1==e.mainForm.sale_type&&1==e.mainForm.business_type&&1==e.mainForm.bill_type?i("el-form-item",{attrs:{label:"结算价格",prop:"sale_style"}},[i("el-radio-group",{model:{value:e.mainForm.sale_style,callback:function(t){e.$set(e.mainForm,"sale_style",t)},expression:"mainForm.sale_style"}},[i("el-radio-button",{attrs:{label:"1"}},[e._v("一价")]),i("el-radio-button",{attrs:{label:"2"}},[e._v("二价")])],1)],1):e._e(),1==e.mainForm.business_schema&&1==e.mainForm.business_type?i("el-form-item",{attrs:{label:"素材是否审核",prop:"is_audit"}},[i("el-radio-group",{model:{value:e.mainForm.is_audit,callback:function(t){e.$set(e.mainForm,"is_audit",t)},expression:"mainForm.is_audit"}},[i("el-radio-button",{attrs:{label:"0"}},[e._v("否")]),i("el-radio-button",{attrs:{label:"1"}},[e._v("是")])],1)],1):e._e(),1==e.mainForm.business_schema&&1==e.mainForm.business_type?i("el-form-item",{attrs:{label:"是否支持DP",prop:"is_dp"}},[i("el-radio-group",{model:{value:e.mainForm.is_dp,callback:function(t){e.$set(e.mainForm,"is_dp",t)},expression:"mainForm.is_dp"}},[i("el-radio-button",{attrs:{label:"0"}},[e._v("否")]),i("el-radio-button",{attrs:{label:"1"}},[e._v("是")])],1)],1):e._e(),1==e.mainForm.business_schema&&1==e.mainForm.business_type?i("el-form-item",{attrs:{label:"是否需白名单",prop:"need_white_list"}},[i("el-radio-group",{model:{value:e.mainForm.need_white_list,callback:function(t){e.$set(e.mainForm,"need_white_list",t)},expression:"mainForm.need_white_list"}},[i("el-radio-button",{attrs:{label:"0"}},[e._v("否")]),i("el-radio-button",{attrs:{label:"1"}},[e._v("是")])],1)],1):e._e(),i("el-form-item",{attrs:{label:"应用类型",prop:"genre_id"}},[i("el-radio-group",{staticStyle:{width:"80%"},model:{value:e.mainForm.genre_id,callback:function(t){e.$set(e.mainForm,"genre_id",t)},expression:"mainForm.genre_id"}},e._l(e.mediaTypeArr,(function(t,a){return i("el-radio-button",{key:a,staticStyle:{"margin-bottom":"5px"},attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",{attrs:{label:"禁投素材类型",prop:"limit_media_type"}},[i("el-checkbox-group",{on:{change:e.checkBTN},model:{value:e.mainForm.limit_media_type,callback:function(t){e.$set(e.mainForm,"limit_media_type",t)},expression:"mainForm.limit_media_type"}},[i("el-checkbox",{attrs:{label:"0",disabled:e.isAllCheck}},[e._v("不限")]),i("el-checkbox",{attrs:{label:"1",disabled:e.isCheck}},[e._v("非引导")]),i("el-checkbox",{attrs:{label:"2",disabled:e.isCheck}},[e._v("半引导")]),i("el-checkbox",{attrs:{label:"3",disabled:e.isCheck}},[e._v("引导")])],1)],1)],1)],1),"1"==e.pageType?i("div",{staticStyle:{"text-align":"center","margin-top":"80px"},attrs:{type:"flex"}},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.submitForm}},[e._v("提交")]),i("el-button",{attrs:{size:"medium"},on:{click:e.cancel}},[e._v("取消")])],1):i("div",{staticStyle:{"text-align":"center","margin-top":"80px"},attrs:{type:"flex"}},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.submitEdit}},[e._v("保存")]),i("el-button",{attrs:{size:"medium"},on:{click:e.cancel}},[e._v("取消")])],1)],2)},s=[],r=(i("96cf"),i("3b8d")),n=(i("ac6a"),{data:function(){return{pageType:"",isCheck:!1,isAllCheck:!1,mainForm:{media_name:"",media_platform_id:"",business_type:1,put_type:1,is_media_cache:0,business_schema:1,bill_type:1,sale_type:1,is_audit:0,is_dp:0,need_white_list:0,genre_id:1,limit_media_type:["0"],bundle_name:"",store_download_url:"",sale_style:1,toll_cycle:1,cpc_uniq:0,toll_node:1,bonus_node:1},mediaTypeArr:[],paltformNameArr:[],rytproject:{media_name:[{required:!0,message:"应用名称不能为空",trigger:"blur"}],media_platform_id:[{required:!0,message:"所属平台不能为空",trigger:"blur"}],limit_media_type:[{required:!0,message:"禁投类型不能为空",trigger:"blur"}]}}},created:function(){this.getMediaType(),this.getMediaPlatform(),this.pageType=this.$route.query.type,this.pageWhere=this.$route.query.where,"trafficplatform"==this.pageWhere&&(this.mainForm.media_name,this.mainForm.media_platform_id=this.$route.query.id),"2"==this.pageType&&this.getMedias()},methods:{changgeBillType:function(e){"2"==this.pageType&&"1"==e&&(this.mainForm.sale_type=1)},checkBTN:function(){var e=this;0!=this.mainForm.limit_media_type.length&&"0"==this.mainForm.limit_media_type[this.mainForm.limit_media_type.length-1]?this.mainForm.limit_media_type=["0"]:this.mainForm.limit_media_type.forEach((function(t,i){"0"==t&&e.mainForm.limit_media_type.splice(i,1)}))},changeDockingMode:function(e){2==e?this.mainForm.bill_type=2:1==e&&(1==this.mainForm.business_schema?this.mainForm.bill_type=1:this.mainForm.bill_type=2)},changeDockingProtocol:function(e){this.mainForm.bill_type=2==e?2:1},submitForm:function(){var e=this;console.log("提交应用信息"),this.$refs.mainForm.validate((function(t){t?e.saveAll():e.$message({type:"info",message:"您有未填写的信息，请检查"})}))},submitEdit:function(){var e=this;console.log("修改媒体信息"),this.$refs.mainForm.validate((function(t){t?e.submitMedias():e.$message({type:"info",message:"您有未填写的信息，请检查"})}))},saveAll:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},"2"==this.pageType&&(t.media_id=this.$route.query.id),t.media_name=this.mainForm.media_name,t.media_platform_id=this.mainForm.media_platform_id,t.put_type=parseInt(this.mainForm.put_type),t.is_media_cache=parseInt(this.mainForm.is_media_cache),t.business_type=this.mainForm.business_type,1==this.mainForm.business_type&&(t.business_schema=this.mainForm.business_schema),1==this.mainForm.business_schema&&1==this.mainForm.bill_type&&1==this.mainForm.business_type?t.sale_type=this.mainForm.sale_type:t.sale_type=0,t.is_audit=this.mainForm.is_audit,t.is_dp=this.mainForm.is_dp,t.need_white_list=this.mainForm.need_white_list,t.bill_type=this.mainForm.bill_type,t.genre_id=this.mainForm.genre_id,t.limit_media_type=this.mainForm.limit_media_type,t.bundle_name=this.mainForm.bundle_name,t.store_download_url=this.mainForm.store_download_url,t.sale_style=this.mainForm.sale_style,t.toll_cycle=this.mainForm.toll_cycle,t.cpc_uniq=this.mainForm.cpc_uniq,t.toll_node=2==this.mainForm.bill_type?1:2,t.bonus_node=this.mainForm.bonus_node,console.log("保存的数据为：",t),e.next=25,this.$http.post(this.baseUrl.ip1+"/sourceSys/media/createMedia",t).then((function(e){200==e.code&&(i.$message.success(e.msg),"trafficplatform"==i.pageWhere?i.$router.push({path:"/mediaManage/mediaList"}):i.$router.go(-1))}));case 25:e.sent;case 26:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMedias:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.query.id,e.next=3,this.$http.get(this.baseUrl.ip1+"/sourceSys/media/upMediaList/".concat(t));case 3:i=e.sent,a=i.data,s=a,console.log("打印获取详情数据",a),this.mainForm.media_name=s.media_name,this.mainForm.media_platform_id=0==s.media_platform_id?this.mainForm.media_platform_id:s.media_platform_id,this.mainForm.business_type=s.business_type,this.mainForm.is_media_cache=s.is_media_cache,this.mainForm.put_type=s.put_type,this.mainForm.business_schema=s.business_schema,this.mainForm.bill_type=s.bill_type,this.mainForm.sale_type=s.sale_type,this.mainForm.is_audit=s.is_audit,this.mainForm.is_dp=s.is_dp,this.mainForm.need_white_list=s.need_white_list,this.mainForm.genre_id=s.genre_id,this.mainForm.limit_media_type=s.limit_media_type,this.mainForm.bundle_name=s.bundle_name,this.mainForm.store_download_url=s.store_download_url,this.mainForm.sale_style=s.sale_style,this.mainForm.toll_cycle=s.toll_cycle,this.mainForm.cpc_uniq=s.cpc_uniq,this.mainForm.toll_node=s.toll_node,this.mainForm.bonus_node=s.bonus_node;case 27:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submitMedias:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.query.id,i={},i.media_name=this.mainForm.media_name,i.media_platform_id=this.mainForm.media_platform_id,i.media_name=this.mainForm.media_name,i.media_platform_id=this.mainForm.media_platform_id,i.put_type=parseInt(this.mainForm.put_type),i.is_media_cache=parseInt(this.mainForm.is_media_cache),i.business_type=this.mainForm.business_type,1==this.mainForm.business_type&&(i.business_schema=this.mainForm.business_schema),1==this.mainForm.business_schema&&1==this.mainForm.bill_type&&1==this.mainForm.business_type?i.sale_type=this.mainForm.sale_type:i.sale_type=0,i.is_audit=this.mainForm.is_audit,i.is_dp=this.mainForm.is_dp,i.need_white_list=this.mainForm.need_white_list,i.bill_type=this.mainForm.bill_type,i.genre_id=this.mainForm.genre_id,i.limit_media_type=this.mainForm.limit_media_type,i.bundle_name=this.mainForm.bundle_name,i.store_download_url=this.mainForm.store_download_url,i.sale_style=this.mainForm.sale_style,i.toll_cycle=this.mainForm.toll_cycle,i.cpc_uniq=this.mainForm.cpc_uniq,i.toll_node=2==this.mainForm.bill_type?1:2,i.bonus_node=this.mainForm.bonus_node,e.next=26,this.$http.post(this.baseUrl.ip1+"/sourceSys/media/upMedia/".concat(t),i).then((function(e){200==e.code&&(a.$message.success(e.msg),"trafficplatform"==a.pageWhere?a.$router.push({path:"/mediaManage/mediaList"}):a.$router.go(-1))}));case 26:e.sent;case 27:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMediaType:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,i,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/sourceSys/media/getMediaType");case 2:t=e.sent,i=t.data,console.log("asaasd",i),a=i,a.forEach((function(e){s.mediaTypeArr.push({label:e.genre_name,value:e.id})}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMediaPlatform:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,i,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/sourceSys/options/mediaPlatform");case 2:t=e.sent,i=t.data,a=i,a.forEach((function(e){s.paltformNameArr.push({label:e.media_platform_name,value:e.id})}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.$router.go(-1)}}}),m=n,o=i("2877"),l=function(e){e.options.__source="src/views/pages/mediaManage/mediaList/editMedias/index.vue"},_=l,p=Object(o["a"])(m,a,s,!1,null,"905856e0",null);"function"===typeof _&&_(p);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0e64b4.a205aa49.js.map