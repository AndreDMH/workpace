(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b50c9dc4"],{"668a":function(t,e,a){},"76fe":function(t,e,a){"use strict";a("668a")},a9db:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dataEntry"},[a("d2-container",[a("template",{slot:"header"},[a("div",{staticClass:"flex ryt-right-top"},[a("div",{staticClass:"line_header"}),t._v("数据录入 ")]),a("div",{staticClass:"menuPartClass"},["1"==t.showStyle?a("el-date-picker",{staticStyle:{width:"220px","margin-left":"11px","margin-top":"11px"},attrs:{type:"daterange",size:"mini","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd ","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,clearable:!1},on:{change:t.dateChange},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}}):t._e(),a("div",{staticStyle:{float:"right"}},[a("el-button",{staticStyle:{"margin-top":"11px","margin-bottom":"5px","margin-right":"11px"},attrs:{size:"mini"},on:{click:function(e){return t.search()}}},[t._v(t._s(t.buttonName))]),a("el-button",{staticStyle:{"margin-top":"11px","margin-bottom":"5px","margin-right":"11px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.submitRules()}}},[t._v("提交")])],1)],1)]),a("el-form",{ref:"multipleSelection",attrs:{inline:!0,model:t.form}},[a("div",[a("el-table",{staticStyle:{width:"100%","margin-top":"0px"},attrs:{data:t.form.entry_data,border:"",size:"medium","header-cell-style":{background:"#f5f5f5"}}},[a("el-table-column",{attrs:{label:"日期",align:"center","min-width":"120",prop:"date"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.date))]}}])}),a("el-table-column",{attrs:{label:"广告位",align:"center","min-width":"120",prop:"position_name"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.position_name))]}}])}),a("el-table-column",{attrs:{label:"媒体名称",align:"center","min-width":"120",prop:"media_name"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.media_name))]}}])}),a("el-table-column",{attrs:{label:"流量平台",align:"center","min-width":"120",prop:"media_platform_name"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.media_platform_name))]}}])}),a("el-table-column",{attrs:{label:"支出",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form-item",{attrs:{prop:"entry_data."+e.$index+".cost",rules:t.rytprojects.dataRules}},[t.isSearch?a("div",[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini",placeholder:"请填写支出"},model:{value:e.row.cost,callback:function(a){t.$set(e.row,"cost",a)},expression:"scope.row.cost"}})],1):a("div",{staticStyle:{width:"180px"}},[t._v(t._s(e.row.cost))])])]}}])}),a("el-table-column",{attrs:{label:"转化数",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form-item",{attrs:{prop:"entry_data."+e.$index+".input_right_dp_pv",rules:t.rytprojects.dpRules}},[t.isSearch?a("div",[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini",placeholder:"请填写转化数"},model:{value:e.row.input_right_dp_pv,callback:function(a){t.$set(e.row,"input_right_dp_pv",a)},expression:"scope.row.input_right_dp_pv"}})],1):a("div",{staticStyle:{width:"180px"}},[t._v(t._s(e.row.input_right_dp_pv))])])]}}])})],1)],1)])],2)],1)},n=[],r=(a("ac6a"),a("96cf"),a("3b8d")),o={data:function(){return{form:{entry_data:[]},buttonName:"预览",total:0,totalArr:[],inputtotal:0,inputTotalArr:[],isSearch:!0,showStyle:"",timeValue:[],loading:!0,position_code_arr:[],incomingData:[],rytprojects:{dataRules:[{required:!0,message:"请填写此处数据",trigger:"blur"},{pattern:/^[+-]?(\d*)?(\.)?\d+$/,message:"只能输入数字",trigger:blur}],dpRules:[{required:!0,message:"请填写此处数据",trigger:"blur"},{pattern:/^[+-]?(\d*)?(\.)?\d+$/,message:"只能输入数字",trigger:blur}]},pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()-864e5},shortcuts:[{text:"昨日",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",[e,e])}},{text:"本周",onClick:function(t){var e=new Date,a=new Date,i=e.getDay()||7;e.setTime(e.getTime()-864e5*(i-1)),t.$emit("pick",[e,a])}},{text:"上周",onClick:function(t){var e,a=new Date,i=a.getFullYear(),n=a.getMonth()+1,r=a.getDate();e=0==a.getDay()?new Date(i+"/"+n+"/"+r).getTime()-864e5*(a.getDay()+6):new Date(i+"/"+n+"/"+r).getTime()-864e5*(a.getDay()-1);var o=e-6048e5,s=e-864e5,l=new Date(o),c=new Date(s);t.$emit("pick",[l,c])}},{text:"本月",onClick:function(t){var e=new Date,a=new Date;a.setDate(1),t.$emit("pick",[a,e])}},{text:"上月",onClick:function(t){var e=new Date,a=new Date(e);a.setMonth(e.getMonth()),e.setMonth(e.getMonth()-1),a.setDate(0),e.setDate(1),t.$emit("pick",[e,a])}},{text:"最近七天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近30天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}}]}}},created:function(){if(this.getSevenDayDate(),this.showStyle=this.$route.query.showStyle,console.log("展示类型",this.showStyle),"1"==this.showStyle)this.getCode();else{var t=[];t=JSON.parse(this.$route.query.showData),this.form.entry_data=t}},mounted:function(){},methods:{addDateZero:function(t){return t<10?"0"+t:t},getSevenDayDate:function(){var t=new Date,e=new Date;e.setTime(e.getTime()-864e5),t.setTime(t.getTime()-864e5);var a=t.getFullYear()+"-"+this.addDateZero(t.getMonth()+1)+"-"+t.getDate(),i=e.getFullYear()+"-"+this.addDateZero(e.getMonth()+1)+"-"+e.getDate();this.timeValue=[i,a]},dateChange:function(t){this.timeValue=t,this.getTableList()},getCode:function(){this.incomingData=JSON.parse(this.$route.query.data),this.position_code_arr=this.incomingData,this.getTableList()},getTableList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post(this.baseUrl.ip1+"/enterData/edit",{position_code_arr:this.position_code_arr,start_date:this.timeValue[0],end_date:this.timeValue[1]});case 2:e=t.sent,a=e.data,i=a,this.form.entry_data=i;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),search:function(){var t=this;"预览"==this.buttonName?(this.isSearch=!1,this.buttonName="取消",console.log("asasa",this.form.entry_data),this.form.entry_data.forEach((function(e){t.totalArr.push(e.cost),t.inputTotalArr.push(e.input_right_dp_pv)})),this.totalArr.forEach((function(e){""==e&&(e=0),t.total+=parseFloat(e)})),this.inputTotalArr.forEach((function(e){""==e&&(jest=0),t.inputtotal+=parseFloat(e)})),console.log("1213",this.totalArr),this.form.entry_data.unshift({date:"-",media_name:"-",media_platform_name:"-",position_name:"-",cost:this.total,input_right_dp_pv:this.inputtotal})):"取消"==this.buttonName&&(this.isSearch=!0,this.buttonName="预览",this.form.entry_data.splice(0,1),this.totalArr.splice(0,this.totalArr.length),this.total=0,this.inputTotalArr.splice(0,this.inputTotalArr.length),this.inputtotal=0)},submitRules:function(){var t=this;this.$refs.multipleSelection.validate((function(e){e?t.submitEdit():t.$message({type:"info",message:"您有未填写的信息，请检查"})}))},submitEdit:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,this.isSearch||this.form.entry_data.splice(0,1),t.next=4,this.$http.post(this.baseUrl.ip1+"/enterData/push",{enter_data:this.form.entry_data}).then((function(t){200==t.code&&(e.$message.success(t.msg),e.$router.go(-1),localStorage.removeItem("media_position_code"),localStorage.removeItem("enterData"))}));case 4:t.sent,this.loading=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},s=o,l=(a("76fe"),a("2877")),c=function(t){t.options.__source="src/views/pages/dataSearch/dataEntryChildren/editdataEntryChildren/index.vue"},u=c,p=Object(l["a"])(s,i,n,!1,null,null,null);"function"===typeof u&&u(p);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-b50c9dc4.b12aef5e.js.map