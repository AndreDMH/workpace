(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-630e6df6"],{"7a20":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"adsenseList"},[i("d2-container",[i("template",{slot:"header"},[i("div",{staticClass:"flex ryt-right-top"},[i("div",{staticClass:"line_header"}),e._v(" 广告位列表 ")]),i("div",{staticClass:"adsenseList_header"},[i("el-button",{staticStyle:{"margin-right":"8px","margin-left":"11px","margin-top":"11px"},attrs:{size:"mini",type:"primary"},on:{click:e.handleFormSubmit}},[i("i",{staticClass:"el-icon-circle-plus-outline"},[e._v(" 新增广告位")])]),i("el-popover",{attrs:{placement:"bottom-end",width:"160"},model:{value:e.visibleUp,callback:function(t){e.visibleUp=t},expression:"visibleUp"}},[i("p",[e._v("您确定启用该广告位吗？")]),i("div",{staticStyle:{margin:"0","text-align":"right"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.cancelDelete("2")}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.upButtonType}},[e._v("确定")])],1),i("el-button",{staticStyle:{"margin-right":"8px"},attrs:{slot:"reference",size:"mini",disabled:0==e.forbidden},slot:"reference"},[i("d2-icon",{attrs:{name:"play"}}),e._v(" 启用 ")],1)],1),i("el-popover",{attrs:{placement:"bottom-end",width:"160"},model:{value:e.visibleDown,callback:function(t){e.visibleDown=t},expression:"visibleDown"}},[i("p",[e._v("您确定暂停该广告位吗？")]),i("div",{staticStyle:{margin:"0","text-align":"right"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.cancelDelete("3")}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.downButtonType}},[e._v("确定")])],1),i("el-button",{attrs:{slot:"reference",size:"mini",disabled:0==e.paused},slot:"reference"},[i("d2-icon",{attrs:{name:"pause"}}),e._v(" 暂停 ")],1)],1),i("input",{attrs:{id:"uploadFild",name:"file",type:"file"},on:{change:e.inputExcel}}),i("button",{staticStyle:{height:"27px",color:"#ffffff","background-color":"#409EFF"},attrs:{size:"mini",id:"uploadBtn"}},[i("d2-icon",{attrs:{name:"plus"}}),e._v(" 导 入 ")],1),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.downloadExcel}},[i("i",{staticClass:"fa fa-download",attrs:{"aria-hidden":"true"}}),e._v(" 下载模板")]),i("el-popover",{attrs:{offset:150,placement:"bottom-end",width:"300"},model:{value:e.isExport_Excel,callback:function(t){e.isExport_Excel=t},expression:"isExport_Excel"}},[i("div",[i("el-date-picker",{staticStyle:{width:"300px","margin-right":"20px"},attrs:{clearable:!1,type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.pickerOptionsO},on:{change:e.exportTable},model:{value:e.timeValueRelease,callback:function(t){e.timeValueRelease=t},expression:"timeValueRelease"}}),i("div",{staticStyle:{"margin-top":"10px",float:"right"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.changeExportBtn}},[e._v("全部")])],1)],1),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"primary"},slot:"reference"},[i("i",{staticClass:"fa fa-external-link",attrs:{"aria-hidden":"true"}}),e._v(" 导出")])],1),i("el-popover",{attrs:{placement:"bottom-end",width:"400"},model:{value:e.isSaleidList,callback:function(t){e.isSaleidList=t},expression:"isSaleidList"}},[i("div",[i("el-form",{ref:"saleForm",staticStyle:{height:"100px"},attrs:{model:e.saleForm,size:"mini",rules:e.saleRule}},[i("el-form-item",{attrs:{label:"是否配置分成：",prop:"split_account_limit","label-width":"150px"}},[i("el-radio-group",{staticStyle:{"margin-left":"30px"},attrs:{size:"medium"},model:{value:e.saleForm.split_account_limit,callback:function(t){e.$set(e.saleForm,"split_account_limit",t)},expression:"saleForm.split_account_limit"}},[i("el-radio-button",{attrs:{label:0}},[e._v("否")]),i("el-radio-button",{attrs:{label:1}},[e._v("是")])],1)],1),"1"==e.saleForm.split_account_limit?i("el-form-item",{attrs:{label:"分成比例：",prop:"split_account_value","label-width":"150px"}},[i("el-input",{staticStyle:{width:"222px"},attrs:{placeholder:"请输入1-100以内数值"},model:{value:e.saleForm.split_account_value,callback:function(t){e.$set(e.saleForm,"split_account_value",t)},expression:"saleForm.split_account_value"}}),e._v("% ")],1):e._e()],1),i("div",{staticStyle:{"text-align":"center","margin-top":"0px"},attrs:{type:"flex"}},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.submitForm}},[e._v("提交")]),i("el-button",{attrs:{size:"medium"},on:{click:e.cancel}},[e._v("取消")])],1)],1),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"primary",disabled:0==e.isSale},slot:"reference"},[i("i",{staticClass:"fa fa-cog",attrs:{"aria-hidden":"true"}}),e._v(" 结算配置 ")])],1),i("el-popover",{attrs:{offset:250,placement:"bottom-end",width:"400"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("div",[i("el-form",{ref:"priceForm",staticStyle:{height:"100px"},attrs:{model:e.priceForm,size:"mini",rules:e.priceRule},nativeOn:{submit:function(e){e.preventDefault()}}},[i("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"价格/比例",prop:"reserve_price","label-width":"90px"}},[i("el-input",{staticStyle:{},attrs:{oninput:"value=value.replace(/^\\D*(\\d*(?:\\.\\d{0,3})?).*$/g, '$1')",placeholder:"请输入价格/比例"},model:{value:e.priceForm.reserve_price,callback:function(t){e.$set(e.priceForm,"reserve_price",t)},expression:"priceForm.reserve_price"}})],1)],1),i("div",{staticStyle:{"text-align":"center","margin-top":"-20px"},attrs:{type:"flex"}},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.submitPrice}},[e._v("提交")]),i("el-button",{attrs:{size:"medium"},on:{click:e.cancelPrice}},[e._v("取消")])],1)],1),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"primary",disabled:0==e.isPrice},on:{click:function(t){return e.compareData()}},slot:"reference"},[i("i",{staticClass:"fa fa-wrench",attrs:{"aria-hidden":"true"}}),e._v(" 修改价格 ")])],1),i("el-form",{directives:[{name:"show",rawName:"v-show",value:!e.isOpen,expression:"!isOpen"}],ref:"form",staticStyle:{"margin-right":"0px","margin-top":"-38px","margin-bottom":"-20px","margin-left":"11px"},attrs:{inline:!0,model:e.form,size:"mini"}},[i("el-row",{staticStyle:{"margin-top":"50px"}},[i("el-form-item",{attrs:{prop:"status"}},[i("span",{staticClass:"ryt-select-text"},[e._v("状态：")]),i("el-select",{staticClass:"ryt-select-left3",staticStyle:{width:"180px"},attrs:{placeholder:"请选择状态"},on:{change:function(t){return e.updatePage()}},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusArray,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"",prop:"position_name"}},[i("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入广告位名称"},on:{change:function(t){return e.nameChange(t,"name")}},model:{value:e.form.position_name,callback:function(t){e.$set(e.form,"position_name",t)},expression:"form.position_name"}}),i("i",{staticClass:"fa fa-search ryt-search-icon",attrs:{"aria-hidden":"true"}})],1),i("el-form-item",{attrs:{label:"",prop:"media_map_code"}},[i("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入媒体映射id"},on:{change:function(t){return e.nameChange(t,"mapID")}},model:{value:e.form.media_map_code,callback:function(t){e.$set(e.form,"media_map_code",t)},expression:"form.media_map_code"}}),i("i",{staticClass:"fa fa-search ryt-search-icon",attrs:{"aria-hidden":"true"}})],1),i("el-form-item",{attrs:{label:"",prop:"media_platform_id_arr"}},[i("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择所属平台",filterable:"",multiple:"","collapse-tags":""},on:{change:function(t){return e.filterMedia(t)}},model:{value:e.form.media_platform_id_arr,callback:function(t){e.$set(e.form,"media_platform_id_arr",t)},expression:"form.media_platform_id_arr"}},e._l(e.mediaplatformArr,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"",prop:"media_id_arr"}},[i("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择应用",filterable:"",multiple:"","collapse-tags":""},on:{change:function(t){return e.updatePage()}},model:{value:e.form.media_id_arr,callback:function(t){e.$set(e.form,"media_id_arr",t)},expression:"form.media_id_arr"}},e._l(e.mediaArr,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"",prop:"scenes_type"}},[i("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择广告位类型",filterable:"",multiple:"","collapse-tags":""},on:{change:function(t){return e.updatePage()}},model:{value:e.form.scenes_type,callback:function(t){e.$set(e.form,"scenes_type",t)},expression:"form.scenes_type"}},e._l(e.scenesArr,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1)]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"configurationTable",staticStyle:{"margin-top":"-20px"},attrs:{data:e.currentTableData,border:"",size:"mini","header-cell-style":{background:"#f5f5f5"}},on:{"filter-change":e.handleFilterChange,"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"55",selectable:e.selectInit}}),i("el-table-column",{attrs:{label:"广告位名称",align:"center",prop:"media_position_name",fixed:"left",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{attrs:{trigger:"hover",placement:"top"}},[i("p",[e._v("广告位id："+e._s(t.row.id)+" "),i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.row.id,expression:"scope.row.id",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],attrs:{type:"text",size:"mini"}},[e._v("复制")])],1),i("p",[e._v("广告位code："+e._s(t.row.media_position_code)+" "),i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.row.media_position_name+" "+t.row.media_position_code+" "+t.row.media_name+" "+t.row.media_map_code,expression:"scope.row.media_position_name+' '+scope.row.media_position_code+' '+scope.row.media_name+' '+scope.row.media_map_code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],attrs:{type:"text",size:"mini"}},[e._v("复制")])],1),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.media_position_name))])])]}}])}),i("el-table-column",{attrs:{label:"状态",align:"center",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#409EFF","inactive-color":"#DEDEDE"},on:{change:function(i){return e.switchChange(t.row,i)}},model:{value:t.row.status,callback:function(i){e.$set(t.row,"status",i)},expression:"scope.row.status"}})]}}])}),i("el-table-column",{attrs:{label:"媒体映射id",align:"center",prop:"media_map_code",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.media_map_code))]}}])}),i("el-table-column",{attrs:{label:"所属平台",align:"center",prop:"media_platform_name",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.media_platform_name))]}}])}),i("el-table-column",{attrs:{label:"所属应用",align:"center",prop:"media_name",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.media_name))]}}])}),i("el-table-column",{attrs:{label:"价格",align:"center",prop:"reserve_price"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.medias.business_type&&1==t.row.medias.business_schema&&1==t.row.sale_type?i("div",[e._v(" RTB类型应用无价格 ")]):i("div",[e._v(" "+e._s(t.row.reserve_price)+" ")])]}}])}),i("el-table-column",{attrs:{label:"结算比例",align:"center",width:"100",prop:"split_account_value"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.split_account_value)+"% ")]}}])}),i("el-table-column",{attrs:{label:"广告位类型",align:"center",prop:"scenes_value",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.scenes_value))]}}])}),i("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.created_at))]}}])}),i("el-table-column",{attrs:{label:"最后修改时间",align:"center",prop:"updated_at",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.updated_at))]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(i){return e.handleClick(t.row)}}},[e._v("编辑")]),i("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(i){return e.copyClick(t.row)}}},[e._v("复制")]),i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.saleClick(t.row)}}},[e._v("结算")])]}}])})],1),i("el-pagination",{staticStyle:{margin:"-10px"},attrs:{slot:"footer","current-page":e.listQuery.current,"page-size":e.listQuery.pageSize,total:e.total,"page-sizes":[10,20,40,60],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange},slot:"footer"})],2)],1)},a=[],s=(i("ac6a"),i("96cf"),i("3b8d")),n=i("c276"),o={name:"adsenseList",data:function(){return{isOpen:!1,pageID:"",pageWhere:"",form:{media_map_code:"",position_name:"",media_platform_id_arr:[],media_id_arr:[],scenes_type:[],status:status},priorityform:{priority_list:[]},priorityTitle:"",priority_data:[],timeValueRelease:[],pickerOptionsO:{disabledDate:function(e){return e.getTime()>Date.now()-864e4}},radio_time:"",dialogPriorityVisible:!1,drawer:!1,statusArray:[{label:"全部",value:""},{label:"启用",value:"1"},{label:"暂停",value:"2"}],mediaplatformArr:[],mediaArr:[],platformArr:[],scenesArr:[],loading:!1,currentTableData:[],listQuery:{columns:"",orders:"",pageSize:10,current:1},total:0,infoDelete:[],idlist:[],visibleDete:!1,visibleUp:!1,visibleDown:!1,forbidden:!1,deteleOut:!1,paused:!1,isSale:!1,isSaleidList:!1,isExport_Excel:!1,saleRule:{split_account_limit:[{required:!0,message:"请选择",trigger:"blur"}],split_account_value:[{required:!0,message:"分成比例不能为空",trigger:"blur"},{pattern:/^100$|^(\d|[1-9]\d)(\.\d{1,3})*$/,message:"只能输入1-100以内的数字，最多保留三位小数"}]},saleForm:{split_account_limit:"0",split_account_value:"100"},isPrice:!1,visible:!1,priceForm:{reserve_price:""},priceRule:{reserve_price:[{required:!0,message:"价格/比例不能为空",trigger:"blur"},{pattern:/^100$|^(\d|[1-9]\d)(\.\d{1,3})*$/,message:"只能输入1-100以内的数字，最多保留三位小数"}]}}},created:function(){this.mediaDown(),this.getMediaPlatform(),this.getPositionType(),this.pageID=this.$route.query.id,this.pageWhere=this.$route.query.where},methods:{changeExportBtn:function(){this.timeValueRelease=[],this.exportTable(),this.isExport_Excel=!1},exportTable:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.baseUrl.ip1+"/sourceSys/mediaPosition/index",i={status:this.form.status,limit:this.listQuery.pageSize,page:this.listQuery.current,media_position_name:this.form.position_name,media_map_code:this.form.media_map_code,media_platform_id_arr:this.form.media_platform_id_arr,media_id_arr:this.form.media_id_arr,scenes_type:this.form.scenes_type,start_date:this.timeValueRelease[0],end_date:this.timeValueRelease[1],is_export:1},e.next=4,this.$http.post(t,i);case 4:r=e.sent,a=r.data,window.location.href=a.url,this.isExport_Excel=!1,this.timeValueRelease=[];case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onoff:function(e){"1"==e?this.isOpen=!1:"2"==e&&(this.isOpen=!0)},onCopy:function(){this.$message({type:"info",message:"复制成功"})},submitForm:function(){var e=this;this.$refs.saleForm.validate((function(t){t?e.setSplitAccount():e.$message({type:"info",message:"您有未填写的信息，请检查"})}))},cancel:function(){this.isSaleidList=!1},setSplitAccount:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},t.position_id_arr=this.idlist,t.split_account_limit=this.saleForm.split_account_limit,t.split_account_value=this.saleForm.split_account_value,i=this.baseUrl.ip1+"/sourceSys/mediaPosition/setSplitAccount",e.next=7,this.$http.post(i,t);case 7:r=e.sent,200==r.code&&(this.$message.success("批量修改成功"),this.isSaleidList=!1,this.saleForm.split_account_limit=0,this.saleForm.split_account_value="100",this.initAdsenseList());case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submitPrice:function(){var e=this;this.$refs.priceForm.validate((function(t){t?e.setReservePrice():e.$message({type:"info",message:"您有未填写的信息，请检查"})}))},cancelPrice:function(){this.visible=!1},setReservePrice:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post(this.baseUrl.ip1+"/sourceSys/mediaPosition/setReservePrice",{position_id_arr:this.idlist,reserve_price:this.priceForm.reserve_price});case 2:t=e.sent,200==t.code&&(this.$message.success("批量修改成功"),this.visible=!1,this.initAdsenseList());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectInit:function(){return!this.visible},compareData:function(){console.log(this.infoDelete);var e=[],t=[];this.infoDelete.forEach((function(i){e.push(i.media_id),t.push(i.sale_type)})),console.log(e),console.log(t);var i=t.every(this.checkData);console.log("sale_type",i);var r=e.every(this.checkMedia);console.log("media_id",r),i&&r?this.visible=!1:(this.visible=!0,this.$message.info("所勾选的广告位必须属于同一个非RTB类型的应用"))},checkData:function(e){return 1!=e},checkMedia:function(e){return e==this.infoDelete[0].media_id},inputExcel:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var i,r,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("上传的数据",t),i=new FormData,r=t.target.files[0],i.append("file",r),a={headers:{"Content-Type":"multipart/form-data"},withCredentials:!0},this.loading=!0,e.next=8,this.$http.post(this.baseUrl.ip1+"/sourceSys/mediaPosition/import",i,a).then((function(e){200==e.code?(s.initAdsenseList(),s.$message.success("导入成功"),s.loading=!1):s.loading=!1}));case 8:e.sent,t.target.value="";case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),downloadExcel:function(){var e=this.baseUrl.ip1+"/sourceSys/mediaPosition/importDemo",t="";t=n["a"].cookies.get("token_wharf"),window.location.href=e+"?token="+t},changeParam:function(e){var t=e.id_arr.map((function(e){return"id_arr[]=".concat(e)})).join("&");return console.log(t),"".concat(t)},getMediaPlatform:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,r,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/sourceSys/options/mediaPlatform");case 2:t=e.sent,i=t.data,r=i,r.forEach((function(e){s.mediaplatformArr.push({label:e.media_platform_name,value:String(e.id)})})),void 0==this.$route.query.media_platform_id||(a=[],a.push(this.$route.query.media_platform_id),this.form.media_platform_id_arr=a,this.initAdsenseList());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updatePage:function(){this.initAdsenseList()},getAdPlatformList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/getSelectAdPlatformList");case 2:t=e.sent,i=t.data,r=i,r.forEach((function(e,t){a.platformArr.push({value:String(e.id),label:e.platform_name})}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),filterMedia:function(e){this.mediaDown(e)},mediaDown:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var i,r,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.form.media_id_arr="",this.mediaArr.splice(0,this.mediaArr.length),e.next=4,this.$http.post(this.baseUrl.ip1+"/sourceSys/options/media",{media_platform_id_arr:t});case 4:i=e.sent,r=i.data,a=r,a.forEach((function(e,t){s.mediaArr.push({value:String(e.id),label:e.media_name})})),void 0==this.$route.query.id||(this.form.media_id_arr=[String(this.$route.query.id)]),this.initAdsenseList();case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),initAdsenseList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$refs.configurationTable.$el.style.width="99.99%",this.loading=!0,e.next=4,this.$http.post(this.baseUrl.ip1+"/sourceSys/mediaPosition/index",{limit:this.listQuery.pageSize,page:"1",status:this.form.status,media_position_name:this.form.position_name,media_platform_id_arr:this.form.media_platform_id_arr,media_id_arr:this.form.media_id_arr,scenes_type:this.form.scenes_type,media_map_code:this.form.media_map_code});case 4:t=e.sent,i=t.data,this.currentTableData=i.data,this.listQuery.current=i.current_page,this.listQuery.limit=i.per_page,this.total=i.total,this.loading=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleFilterChange:function(e){e.position_status?this.form.position_status=e.position_status[0]:this.form.position_type=e.position_type[0],this.initAdsenseList()},mediaChanges:function(e){this.form.media_id=e,this.initAdsenseList()},nameChange:function(e,t){"name"==t?this.form.position_name=e:"code"==t?this.form.media_position_code=e:"mapID"==t&&(this.form.media_map_code=e),this.initAdsenseList()},operatesOut:function(e){this.$router.push({path:"/launchManage/mediaAdLaunch",query:{id:e.id,type:"2"}})},settlementClick:function(e){this.$router.push({path:"adsenseList/shareAdsense",query:{id:e.id}})},cancelDelete:function(e){this.visibleDete=!1,this.visibleUp=!1,this.visibleDown=!1,"1"==e?this.$message.error("取消删除操作"):"2"==e?this.$message.error("取消启用操作"):this.$message.error("取消暂停操作")},deleteButtonType:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.visibleDete=!1,t={id_arr:this.idlist},i=this.baseUrl.ip1+"/sourceSys/mediaPosition/delete",e.next=5,this.$http.post(i,t).then((function(e){200==e.code&&r.$message.success("删除成功")}));case 5:e.sent,this.initAdsenseList();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),upButtonType:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.visibleUp=!1,t={id_arr:this.idlist,status:1},i=this.baseUrl.ip1+"/sourceSys/mediaPosition/updateStatus",e.next=5,this.$http.post(i,t);case 5:r=e.sent,r.data,this.$message.success("启用成功"),this.initAdsenseList();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),downButtonType:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,r,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.visibleDown=!1,t={id_arr:this.idlist,status:2},e.next=4,this.$http.post(this.baseUrl.ip1+"/sourceSys/mediaPosition/updateStatus",t);case 4:i=e.sent,r=i.data,a=r.isOperate,1==a?this.$confirm("此操作将导致投放暂停，是否继续","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"confirm"==t?n.putIn():n.$message.error("取消暂停操作");case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}):this.putIn();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),putIn:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={id_arr:this.idlist,status:2},i=this.baseUrl.ip1+"/sourceSys/mediaPosition/updateStatus",e.next=4,this.$http.post(i,t);case 4:r=e.sent,r.data,this.$message.success("暂停成功"),this.initAdsenseList();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),switchChange:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,i){var r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t,i,this.idlist),r=this,a=[],a.push(t.id),s={status:i,id_arr:a},e.next=7,this.$http.post(this.baseUrl.ip1+"/sourceSys/mediaPosition/updateStatus",s).then((function(e){200==e.code?(r.$message.success("状态修改成功"),this.initAdsenseList()):this.initAdsenseList()}));case 7:e.sent;case 8:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),handleSelectionChange:function(e){var t=this;this.infoDelete=e;var i=[];this.infoDelete.map((function(e){i.push(e.id)})),this.idlist=i;var r=!1,a=!1;e.length>0?(e.forEach((function(e){2==e.status&&(r=!0),1==e.status&&(a=!0),r&&a?(t.forbidden=!0,t.deteleOut=!1,t.paused=!0):r?(t.forbidden=!0,t.deteleOut=!0,t.paused=!1):a?(t.forbidden=!1,t.deteleOut=!1,t.paused=!0):(t.forbidden=!0,t.deteleOut=!0,t.paused=!0)})),this.isSale=!0,this.isPrice=!0):(this.forbidden=!1,this.deteleOut=!1,this.paused=!1,this.isSale=!1,this.isPrice=!1)},handleFormSubmit:function(){this.$router.push({path:"adsenseList/editAdsenseList",query:{id:"",type:"1"}})},handleClick:function(e){this.$router.push({path:"adsenseList/editAdsenseList",query:{id:e.id,type:"2"}})},copyClick:function(e){this.$router.push({path:"adsenseList/editAdsenseList",query:{id:e.id,type:"3"}})},saleClick:function(e){this.$router.push({path:"adsenseList/shareAdsense",query:{id:e.id}})},priorityClick:function(e){this.getPriorityList(e)},getPriorityList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var i,r,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/mediaPosition/priorityList?media_position_id=".concat(t.id,"&media_position_code=").concat(t.media_position_code));case 2:i=e.sent,r=i.data,a=r.priority_list,this.priorityTitle=r.media_position_name,a&&a.length>0?(this.priorityform.priority_list=[],this.dialogPriorityVisible=!0,a.forEach((function(e,t){s.priorityform.priority_list.push({ad_platform_map_id:e.ad_platform_map_id,budget_name:e.budget_name,ad_platform_name:e.ad_platform_name,priority:e.priority,isEdit:!1})}))):this.$message.info("没有进行投放，不需要修改优先级");case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.listQuery.pageSize=e,this.initAdsenseList()},handleCurrentChange:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listQuery.current=t,this.loading=!0,e.next=4,this.$http.post(this.baseUrl.ip1+"/sourceSys/mediaPosition/index",{position_style:2,limit:this.listQuery.pageSize,page:this.listQuery.current,status:this.form.status,media_position_name:this.form.position_name,media_platform_id_arr:this.form.media_platform_id_arr,media_id_arr:this.form.media_id_arr,scenes_type:this.form.scenes_type,media_map_code:this.form.media_map_code});case 4:i=e.sent,r=i.data,this.currentTableData=r.data,this.listQuery.current=r.current_page,this.listQuery.limit=r.per_page,this.total=r.total,this.loading=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getPositionType:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/scene/list");case 2:t=e.sent,i=t.data,r=i,this.scenesArr=r;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},l=o,c=(i("ddb5"),i("2877")),u=function(e){e.options.__source="src/views/pages/mediaManage/adsenseList/index.vue"},p=u,d=Object(c["a"])(l,r,a,!1,null,null,null);"function"===typeof p&&p(d);t["default"]=d.exports},ddb5:function(e,t,i){"use strict";i("e826")},e826:function(e,t,i){}}]);
//# sourceMappingURL=chunk-630e6df6.085a07ce.js.map