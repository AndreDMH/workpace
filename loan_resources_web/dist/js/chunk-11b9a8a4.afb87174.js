(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11b9a8a4"],{"1a16":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"addAccounts"},[i("d2-container",[i("template",{slot:"header"},[i("div",{staticClass:"flex ryt-right-top"},[t.isEdit?i("div",{staticClass:"line_title"},[t._v("编辑账户")]):i("div",[t._v("新建账户")])])]),i("div",{staticClass:"account_header"},[t._v("账户信息")]),i("el-form",{ref:"mainForm",staticStyle:{"margin-top":"40px"},attrs:{model:t.mainForm,"label-width":"200px",rules:t.rule}},[i("el-form-item",{attrs:{label:"账户名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入账户名称"},model:{value:t.mainForm.name,callback:function(e){t.$set(t.mainForm,"name",e)},expression:"mainForm.name"}})],1),i("el-form-item",{attrs:{label:"账号角色:",prop:"role"}},[i("el-radio-group",{model:{value:t.mainForm.role,callback:function(e){t.$set(t.mainForm,"role",e)},expression:"mainForm.role"}},t._l(t.roleArrs,(function(e){return i("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])})),1)],1),i("el-form-item",{attrs:{label:"登录账号:",prop:"mobile"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入登录账号",maxlength:"11"},model:{value:t.mainForm.mobile,callback:function(e){t.$set(t.mainForm,"mobile",e)},expression:"mainForm.mobile"}})],1),i("el-form-item",{attrs:{label:"登录密码:",prop:"password"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入密码"},model:{value:t.mainForm.password,callback:function(e){t.$set(t.mainForm,"password",e)},expression:"mainForm.password"}})],1),i("el-form-item",{attrs:{label:"确认密码:",prop:"password_confirmation"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入密码"},model:{value:t.mainForm.password_confirmation,callback:function(e){t.$set(t.mainForm,"password_confirmation",e)},expression:"mainForm.password_confirmation"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isEdit,expression:"isEdit"}],staticStyle:{"font-size":"8px","margin-left":"150px"}},[t._v(" 提示: 如果不填写则默认为原密码 修改密码必须包含（大写字母、小写字母、数字以及特殊字符） ")]),i("div",{staticClass:"account_header",staticStyle:{"margin-top":"20px"}},[t._v("配置信息")]),i("el-form-item",{staticStyle:{"margin-top":"120px"},attrs:{label:"是否限制管理平台:",prop:"is_limit_media_platform"}},[i("el-radio-group",{staticStyle:{"margin-left":"10px"},attrs:{size:"medium"},model:{value:t.mainForm.is_limit_media_platform,callback:function(e){t.$set(t.mainForm,"is_limit_media_platform",e)},expression:"mainForm.is_limit_media_platform"}},[i("el-radio-button",{attrs:{label:1}},[t._v("只查看负责平台")]),i("el-radio-button",{attrs:{label:0}},[t._v("不限制")])],1)],1)],1),i("div",{staticStyle:{"text-align":"left","margin-top":"50px","margin-left":"200px"},attrs:{type:"flex"}},[i("el-button",{attrs:{type:"primary",size:"medium "},on:{click:t.sunmitMedias}},[t._v("提交")])],1)],2),i("div",{staticClass:"tanceng"},[i("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"列控制",visible:t.show,"close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e},close:function(e){return t.closeDlg()}}},[i("div",[i("el-transfer",{ref:"parant",staticStyle:{"text-align":"left",display:"flex","max-width":"600px"},attrs:{filterable:"",titles:t.transferTitleArray,format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:t.allShowDataList},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.option;return i("span",{staticClass:"spanList",on:{dragstart:t.dragstart,dragover:function(e){return t.allowDrop(e)},drop:function(e){return t.drop(e)}}},[t._v(t._s(a.label))])}}]),model:{value:t.transfersData,callback:function(e){t.transfersData=e},expression:"transfersData"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.configConfirm}},[t._v("保存")])],1)])],1)],1)},r=[],s=(i("7f7f"),i("c5f6"),i("ac6a"),i("96cf"),i("3b8d")),n=(i("d046"),{name:"editAccounts",data:function(){var t=this,e=function(e,i,a){""===i||""!==t.mainForm.password&&t.$refs.mainForm.validateField("password_confirmation"),a()},i=function(e,i,a){""===i?""==t.mainForm.password?a():a(new Error("请输入确认密码")):i!==t.mainForm.password?a(new Error("两次输入密码不一致！")):a()};return{isEdit:!1,mainForm:{name:"",role:"",mobile:"",password:"",password_confirmation:"",id:"",is_limit_medias:"0",is_limit_media_platform:"0"},roleArrs:[],hiddenData:[],show:!1,transfersData:[],downdataList:[],media_list:[],selectSetNum:"",transferTitleArray:[],allShowDataList:[],rule:{name:[{required:!0,message:"账户名称不能为空！",trigger:"blur"},{min:0,max:20,message:"限制20个字",trigger:"blur"}],role:[{required:!0,message:"账户角色不能为空！",trigger:"blur"}],mobile:[{pattern:/^[1][3,4,5,6,7,8,9][0-9]{9}$/,message:"请填写正确的登录账号！",trigger:"blur",required:!0}],is_limit_medias:[{required:!0,message:"请选择",trigger:"blur"}],is_limit_media_platform:[{required:!0,message:"请选择",trigger:"blur"}],password:[{validator:e,trigger:"blur"},{pattern:/[a-z]/,message:"密码必须包含小写字母！",trigger:"blur"},{pattern:/[A-Z]/,message:"密码必须包含大写字母！",trigger:"blur"},{pattern:/\W/,message:"密码必须包含特殊字符！",trigger:"blur"},{pattern:/[1,2,3,4,5,6,7,8,9,0]/,message:"密码必须包含数字！",trigger:"blur"},{min:6,message:"密码至少为6个字符",trigger:"blur"},{max:18,message:"密码最高为18个字符",trigger:"blur"}],password_confirmation:[{validator:i,trigger:"blur"}]}}},created:function(){this.getMockData(),this.isEdit=!!this.$route.query.id,this.isEdit&&this.detailed()},methods:{getMockData:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get(this.baseUrl.ip1+"/role/index",{params:{type:"all"}});case 2:e=t.sent,i=e.data,a=[],a=i,a.forEach((function(t,e){Number(0!==t.id)&&r.roleArrs.push({label:t.name,value:String(t.id)})}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),detailed:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.query.id,t.next=3,this.$http.get(this.baseUrl.ip1+"/user/update/".concat(e));case 3:i=t.sent,a=i.data,console.log(a),r=a,s="",s=0==r.roles.length?"2":String(r.roles[0].id),console.log("1",s),this.mainForm.name=a.name,this.mainForm.mobile=a.mobile,this.mainForm.role=s,this.mainForm.id=a.id,this.mainForm.is_limit_medias=a.is_limit_media,this.mainForm.is_limit_media_platform=a.is_limit_media_platform,this.media_list=a.media_list,this.hiddenData=a.media_list;case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),sunmitMedias:function(){var t=this;console.log("11",this.mainForm),this.$refs.mainForm.validate((function(e){console.log("00",t.mainForm),e?1==t.isEdit?(console.log("1"),t.submission()):""==t.mainForm.password?t.$message({type:"info",message:"您有未填写的信息，请检查"}):(console.log("2"),t.submission()):t.$message({type:"info",message:"您有未填写的信息，请检查"})}))},submission:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={name:this.mainForm.name,mobile:this.mainForm.mobile,role:this.mainForm.role,password:this.mainForm.password,password_confirmation:this.mainForm.password_confirmation,is_limit_media:this.mainForm.is_limit_medias,is_limit_media_platform:this.mainForm.is_limit_media_platform,media_list:this.media_list},1!=this.isEdit){t.next=8;break}return t.next=4,this.$http.post(this.baseUrl.ip1+"/user/update/".concat(this.mainForm.id),e);case 4:i=t.sent,i.data,t.next=12;break;case 8:return t.next=10,this.$http.post(this.baseUrl.ip1+"/register",e);case 10:a=t.sent,a.data;case 12:this.$message.success("保存成功"),this.$router.go(-1);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initMediaColumn:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get(this.baseUrl.ip1+"/medias/getMediasList");case 2:e=t.sent,i=e.data,a=i.data,r=[],a.forEach((function(t){r.push({key:t.media_code,label:t.media_name})})),this.downdataList=r;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),configsButton:function(t){var e=this;if(this.selectSetNum=t,console.log("配置的是哪个：",this.selectSetNum),1==this.selectSetNum){this.transferTitleArray=["隐藏媒体","显示媒体"],this.allShowDataList=this.downdataList,this.transfersData=this.hiddenData,this.show=!0;var i=[],a=[];this.$nextTick((function(){for(var t=document.getElementsByClassName("spanList"),r=0;r<t.length;r++)i.push(t[r].offsetParent.children[0].lastChild.value),a.push(t[r].offsetParent.children[0].lastChild);for(var s=[],n=0;n<i.length;n++)-1==e.hiddenData.indexOf(i[n])&&s.push(n);for(var o=0;o<s.length;o++)t[o].setAttribute("draggable",!0)}))}},closeDlg:function(){this.show=!1},configConfirm:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1==this.selectSetNum){for(e=document.getElementsByClassName("spanList"),i=[],a=0;a<e.length;a++)i.push(e[a].offsetParent.children[0].lastChild.value);for(r=[],s=0;s<i.length;s++)-1==this.transfersData.indexOf(i[s])&&r.push(i[s]);this.show=!1,this.media_list=this.transfersData,this.hiddenData=this.media_list,console.log("需要保存的数组数据",this.media_list)}case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),dragstart:function(t){this.moveDom=t.currentTarget,this.startY=t.clientY},allowDrop:function(t){t.preventDefault(),this.endY=t.clientY,this.changeDom=t.currentTarget;var e=this.$refs.parant.$children[0].$children[2].$el,i=this.changeDom.parentNode.parentNode,a=this.moveDom.parentNode.parentNode;this.endY-this.startY>=0?e.insertBefore(a,i.nextSibling):e.insertBefore(a,i)},drop:function(t){this.changeDom=t.currentTarget,this.endY=t.clientY;var e=this.$refs.parant.$children[0].$children[2].$el,i=this.changeDom.parentNode.parentNode,a=this.moveDom.parentNode.parentNode;this.endY-this.startY>=0?e.insertBefore(a,i.nextSibling):e.insertBefore(a,i)}}}),o=n,l=(i("8b56"),i("2877")),m=function(t){t.options.__source="src/views/pages/accountManage/accountMeg/editAccounts/index.vue"},c=m,d=Object(l["a"])(o,a,r,!1,null,null,null);"function"===typeof c&&c(d);e["default"]=d.exports},"6ce3":function(t,e,i){},"8b56":function(t,e,i){"use strict";i("6ce3")}}]);
//# sourceMappingURL=chunk-11b9a8a4.afb87174.js.map