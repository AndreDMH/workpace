(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e418bb22"],{"4c6b":function(e,t,i){},a9af:function(e,t,i){"use strict";i("4c6b")},bca8:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"entryData"},[i("d2-container",[i("template",{slot:"header"},[i("div",{staticClass:"flex ryt-right-top"},[i("div",{staticClass:"line_header"}),e._v("整体数据 ")]),i("div",{staticClass:"menuPartClass"},[i("el-form",{attrs:{inline:!0,model:e.form,size:"mini","label-width":"80px"}},[i("el-row",{staticClass:"dataScreen"},[i("el-button",{staticClass:"el-icon-refresh",staticStyle:{float:"right","margin-top":"10px","margin-right":"10px"},attrs:{size:"mini"},on:{click:e.refreshPageClick}},[e._v("刷新")]),i("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"0px","margin-left":"11px"},attrs:{"label-width":"80px",prop:"media_platform_id_arr"}},[i("el-select",{staticStyle:{width:"180px","margin-right":"8px"},attrs:{placeholder:"请选择平台",filterable:"",size:"mini",multiple:"","collapse-tags":""},on:{change:function(t){return e.filterMedia(t)}},model:{value:e.form.media_platform_id_arr,callback:function(t){e.$set(e.form,"media_platform_id_arr",t)},expression:"form.media_platform_id_arr"}},e._l(e.mediaPlatformArr,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value,id:e.id}})})),1)],1),i("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"0px"},attrs:{"label-width":"80px",prop:"media_id_arr"}},[i("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择应用",filterable:"",size:"mini",multiple:"","collapse-tags":""},on:{change:function(t){return e.filterPosition(t)}},model:{value:e.form.media_id_arr,callback:function(t){e.$set(e.form,"media_id_arr",t)},expression:"form.media_id_arr"}},e._l(e.mediaArr,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value,id:e.id}})})),1)],1),i("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"0px"},attrs:{"label-width":"80px",prop:"position_id_arr"}},[i("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择广告位",filterable:"",size:"mini",multiple:"","collapse-tags":""},on:{change:function(t){return e.filterpos()}},model:{value:e.form.position_id_arr,callback:function(t){e.$set(e.form,"position_id_arr",t)},expression:"form.position_id_arr"}},e._l(e.positionArr,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"0px"},attrs:{"label-width":"80px"}},[i("el-date-picker",{staticStyle:{width:"210px"},attrs:{clearable:!1,type:"daterange",size:"mini","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},on:{change:e.dateChange},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),i("div",{staticClass:"listMenuPartClass"},[i("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.exportBtn}},[i("d2-icon",{attrs:{name:"plus"}}),e._v("导出 ")],1),i("el-popover",{attrs:{offset:500,placement:"bottom-end",width:"350"},model:{value:e.dateVisible,callback:function(t){e.dateVisible=t},expression:"dateVisible"}},[i("div",[i("el-date-picker",{staticStyle:{width:"300px","margin-right":"20px"},attrs:{clearable:!1,type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.pickerOptionsO},on:{change:e.dateChangeRelease},model:{value:e.timeValueRelease,callback:function(t){e.timeValueRelease=t},expression:"timeValueRelease"}})],1),i("el-button",{attrs:{slot:"reference",size:"mini",type:"primary"},slot:"reference"},[i("i",{staticClass:"fa fa-eye",attrs:{"aria-hidden":"true"}}),e._v(" 概览发布 ")])],1)],1)],1)],1)],1)]),i("el-table",{ref:"multipleSelection",staticStyle:{"margin-top":"-20px"},attrs:{border:"",data:e.listDataArray,size:"small","header-cell-style":{background:"#f5f5f5"},"row-class-name":e.tableRowClassName}},[i("el-table-column",{key:"1",attrs:{label:"日期",align:"center","min-width":"120",prop:"date",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date?t.row.date:"-"))]}}])}),i("el-table-column",{attrs:{label:"平台名称",align:"center","min-width":"120",prop:"media_platform_name",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.media_platform_name?t.row.media_platform_name:"-"))]}}])}),i("el-table-column",{attrs:{label:"应用名称",align:"center","min-width":"120",prop:"media_name",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.media_name?t.row.media_name:"-"))]}}])}),i("el-table-column",{attrs:{label:"广告位名称",align:"center","min-width":"120",prop:"position_name",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.position_name?t.row.position_name:"-"))]}}])}),i("el-table-column",{attrs:{label:"结算方式",align:"center","min-width":"120",prop:"bill_type"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.bill_type?i("div",[e._v("CPM")]):e._e(),2==t.row.bill_type?i("div",[e._v("CPC")]):e._e(),3==t.row.bill_type?i("div",[e._v("CPA")]):e._e(),4==t.row.bill_type?i("div",[e._v("CPS")]):e._e(),5==t.row.bill_type?i("div",[e._v("CPD")]):e._e()]}}])}),i("el-table-column",{attrs:{label:"CPA单价",align:"center","min-width":"120",prop:"cpa_reserve_price"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.cpa_reserve_price?t.row.cpa_reserve_price:"-"))]}}])}),i("el-table-column",{attrs:{label:"CPS比例",align:"center","min-width":"120",prop:"cps_reserve_price"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.cps_reserve_price?t.row.cps_reserve_price:"-"))]}}])}),i("el-table-column",{attrs:{label:"统计转化数",align:"center","min-width":"120",prop:"sum_right_dp_pv"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.sum_right_dp_pv))]}}])}),i("el-table-column",{attrs:{label:"录入转化数",align:"center","min-width":"120",prop:"input_right_dp_pv"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.input_right_dp_pv))]}}])}),i("el-table-column",{attrs:{label:"结算转化数",align:"center","min-width":"120",prop:"bill_right_dp_pv"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.bill_right_dp_pv))]}}])}),i("el-table-column",{attrs:{label:"统计支出",align:"center","min-width":"120",prop:"cost"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.cost))]}}])}),i("el-table-column",{attrs:{label:"录入支出",align:"center","min-width":"120",prop:"input_spending"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.input_spending))]}}])}),i("el-table-column",{attrs:{label:"结算支出",align:"center","min-width":"120",prop:"bill_amount"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.bill_amount))]}}])}),i("el-table-column",{attrs:{label:"发布状态",align:"center","min-width":"120",prop:"status",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?i("div",[e._v("未发布")]):e._e(),1==t.row.status?i("div",[e._v("已发布")]):e._e()]}}])})],1),i("el-pagination",{staticStyle:{margin:"-10px"},attrs:{slot:"footer","current-page":e.listQuery.current,"page-size":e.listQuery.pageSize,total:e.total,"page-sizes":[10,20,40,60],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange},slot:"footer"})],2)],1)},a=[],n=(i("ac6a"),i("96cf"),i("3b8d")),s=(i("a481"),i("c276")),l={name:"entryData",data:function(){return{form:{media_platform_id_arr:[],media_id_arr:[],position_id_arr:[]},dateVisible:!1,mediaPlatformArr:[],mediaArr:[],positionArr:[],platformFilterArr:[],mediaFilterArr:[],timeValue:[],timeValueRelease:[],listQuery:{pageSize:10,current:1,sort:"",order:""},total:0,listDataArray:[],pickerOptionsO:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}},pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()-864e5},shortcuts:[{text:"今日",onClick:function(e){var t=new Date,i=new Date;e.$emit("pick",[i,t])}},{text:"昨日",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",[t,t])}},{text:"本周",onClick:function(e){var t=new Date,i=new Date,r=t.getDay()||7;t.setTime(t.getTime()-864e5*(r-1)),e.$emit("pick",[t,i])}},{text:"上周",onClick:function(e){var t,i=new Date,r=i.getFullYear(),a=i.getMonth()+1,n=i.getDate();t=0==i.getDay()?new Date(r+"/"+a+"/"+n).getTime()-864e5*(i.getDay()+6):new Date(r+"/"+a+"/"+n).getTime()-864e5*(i.getDay()-1);var s=t-6048e5,l=t-864e5,o=new Date(s),c=new Date(l);e.$emit("pick",[o,c])}},{text:"本月",onClick:function(e){var t=new Date,i=new Date;i.setDate(1),e.$emit("pick",[i,t])}},{text:"上月",onClick:function(e){var t=new Date,i=new Date(t);i.setMonth(t.getMonth()),t.setMonth(t.getMonth()-1),i.setDate(0),t.setDate(1),e.$emit("pick",[t,i])}},{text:"最近七天",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-5184e5),e.$emit("pick",[i,t])}},{text:"最近30天",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}}]}}},created:function(){this.getMediaPlatform(),this.getMedia(),this.getPosition(),this.getSevenDayDate(),this.fixedForm()},methods:{inputShareButton:function(){var e=this.baseUrl.ip1+"/enterData/excel/fxk",t={start_date:this.timeValue[0],end_date:this.timeValue[1]},i=this.changeParam(t),r="";r=s["a"].cookies.get("token_wharf"),window.location.href=e+"?token="+r+i},changeParam:function(e){return JSON.stringify(e).replace(/:/g,"=").replace(/,/g,"&").replace(/{/g,"&").replace(/}/g,"").replace(/"/g,"")},dateChange:function(e){this.timeValue=e,this.listQuery.current=1,this.fixedForm()},getSevenDayDate:function(){var e=new Date,t=new Date;t.setTime(t.getTime()-6048e5);var i=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();this.timeValue=[r,i]},fixedForm:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post(this.baseUrl.ip1+"/cost_publish_data/data_list",{media_platform_id_arr:this.form.media_platform_id_arr,media_id_arr:this.form.media_id_arr,position_id_arr:this.form.position_id_arr,start_date:this.timeValue[0],end_date:this.timeValue[1],limit:this.listQuery.pageSize,page:this.listQuery.current});case 2:t=e.sent,i=t.data,this.listDataArray=i.data,this.listQuery.current=i.current_page,this.listQuery.limit=i.per_page,this.total=i.total,console.log(i.total),this.gettotalData();case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),gettotalData:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={media_platform_id_arr:this.form.media_platform_id_arr,media_id_arr:this.form.media_id_arr,position_id_arr:this.form.position_id_arr,start_date:this.timeValue[0],end_date:this.timeValue[1],limit:this.listQuery.pageSize,page:this.listQuery.current},e.next=3,this.$http.post(this.baseUrl.ip1+"/cost_publish_data/data_total",t).then((function(e){200==e.code&&i.listDataArray.unshift(e.data)}));case 3:e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),exportBtn:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post(this.baseUrl.ip1+"/cost_publish_data/data_export",{media_platform_id_arr:this.form.media_platform_id_arr,media_id_arr:this.form.media_id_arr,position_id_arr:this.form.position_id_arr,start_date:this.timeValue[0],end_date:this.timeValue[1],limit:this.listQuery.pageSize,page:this.listQuery.current});case 2:t=e.sent,i=t.data,window.location.href=i.url;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),dateChangeRelease:function(){this.$router.push({path:"overallData/releaseData",query:{start_date:this.timeValueRelease[0],end_date:this.timeValueRelease[1]}})},handleSizeChange:function(e){this.listQuery.pageSize=e,this.listQuery.current=1,this.fixedForm()},handleCurrentChange:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("aasa",this.listQuery.pageSize),this.listQuery.current=t,this.loading=!0,e.next=5,this.$http.post(this.baseUrl.ip1+"/cost_publish_data/data_list",{media_platform_id_arr:this.form.media_platform_id_arr,media_id_arr:this.form.media_id_arr,position_id_arr:this.form.position_id_arr,start_date:this.timeValue[0],end_date:this.timeValue[1],limit:this.listQuery.pageSize,page:this.listQuery.current});case 5:i=e.sent,r=i.data,this.listDataArray=r.data,this.listQuery.current=r.current_page,this.listQuery.limit=r.per_page,this.total=r.total,this.gettotalData();case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),tableRowClassName:function(e){e.row;var t=e.rowIndex;return 0===t?"success-row":""},refreshPageClick:function(){this.fixedForm()},getMediaPlatform:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get(this.baseUrl.ip1+"/sourceSys/options/mediaPlatform");case 2:t=e.sent,i=t.data,r=i,r.forEach((function(e){a.mediaPlatformArr.push({label:e.media_platform_name,value:e.id,id:e.id})}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),filterMedia:function(e){var t=this;this.form.media_id_arr=[],this.form.position_id_arr=[],this.platformFilterArr.splice(0,this.platformFilterArr.length),e.forEach((function(e){t.mediaPlatformArr.forEach((function(i){e==i.value&&t.platformFilterArr.push(i.id)}))})),this.getMedia(this.platformFilterArr),this.getPosition(),this.listQuery.current=1,this.fixedForm()},getMedia:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var i,r,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.form.position_id_arr=[],this.mediaArr.splice(0,this.mediaArr.length),e.next=4,this.$http.post(this.baseUrl.ip1+"/sourceSys/options/media",{media_platform_id_arr:t});case 4:i=e.sent,r=i.data,a=r,a.forEach((function(e,t){n.mediaArr.push({label:e.media_name,value:e.id,id:e.id})}));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),filterPosition:function(e){var t=this;this.form.position_id_arr=[],this.mediaFilterArr.splice(0,this.mediaFilterArr.length),e.forEach((function(e){t.mediaArr.forEach((function(i){e==i.value&&t.mediaFilterArr.push(i.id)}))})),this.getPosition(this.mediaFilterArr),this.listQuery.current=1,this.fixedForm()},getPosition:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var i,r,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.positionArr.splice(0,this.positionArr.length),e.next=3,this.$http.post(this.baseUrl.ip1+"/sourceSys/options/getSelectPositionList",{media_id_arr:t});case 3:i=e.sent,r=i.data,a=r,a.forEach((function(e,t){n.positionArr.push({value:e.id,label:e.media_position_name})}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),filterpos:function(){this.listQuery.current=1,this.fixedForm()}}},o=l,c=(i("a9af"),i("2877")),u=function(e){e.options.__source="src/views/pages/dataFormReport/overallData/index.vue"},p=u,d=Object(c["a"])(o,r,a,!1,null,null,null);"function"===typeof p&&p(d);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-e418bb22.7b6d0326.js.map