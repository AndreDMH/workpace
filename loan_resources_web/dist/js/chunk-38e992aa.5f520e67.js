(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38e992aa"],{"78ed":function(t,e,r){},8972:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"overallData_releaseData"},[r("d2-container",[r("template",{slot:"header"},[r("div",{staticClass:"flex ryt-right-top"},[r("div",{staticClass:"line_header"}),t._v("预览发布 ")]),r("div",{staticClass:"menuPartClass"},[r("el-form",{attrs:{inline:!0,model:t.form,size:"small","label-width":"80px"}},[r("el-row",{staticClass:"dataScreen"},[r("el-button",{staticClass:"el-icon-refresh",staticStyle:{float:"right","margin-top":"11px","margin-right":"11px"},attrs:{size:"mini"},on:{click:t.refreshPageClick}},[t._v("刷新")]),r("el-button",{staticStyle:{float:"right","margin-top":"11px","margin-right":"11px"},attrs:{size:"mini",type:"primary"},on:{click:t.releaseBtn}},[r("i",{staticClass:"fa fa-paper-plane-o",attrs:{"aria-hidden":"true"}}),t._v(" 发布")]),r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"0px"},attrs:{"label-width":"80px",prop:"media_platform_id_arr"}},[r("el-select",{staticStyle:{width:"180px","margin-right":"11px","margin-left":"11px"},attrs:{placeholder:"请选择平台",filterable:"",size:"mini",multiple:"","collapse-tags":""},on:{change:function(e){return t.filterMedia(e)}},model:{value:t.form.media_platform_id_arr,callback:function(e){t.$set(t.form,"media_platform_id_arr",e)},expression:"form.media_platform_id_arr"}},t._l(t.mediaPlatformArr,(function(t,e){return r("el-option",{key:e,attrs:{label:t.label,value:t.value,id:t.id}})})),1)],1),r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"0px"},attrs:{"label-width":"80px",prop:"media_id_arr"}},[r("el-select",{staticStyle:{width:"180px","margin-right":"11px"},attrs:{size:"mini",placeholder:"请选择应用",filterable:"",multiple:"","collapse-tags":""},on:{change:function(e){return t.filterPosition(e)}},model:{value:t.form.media_id_arr,callback:function(e){t.$set(t.form,"media_id_arr",e)},expression:"form.media_id_arr"}},t._l(t.mediaArr,(function(t,e){return r("el-option",{key:e,attrs:{label:t.label,value:t.value,id:t.id}})})),1)],1),r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"0px"},attrs:{"label-width":"80px",prop:"position_id_arr"}},[r("el-select",{staticStyle:{width:"180px","margin-right":"20px"},attrs:{size:"mini",placeholder:"请选择广告位",filterable:"",multiple:"","collapse-tags":""},on:{change:function(e){return t.filterpos()}},model:{value:t.form.position_id_arr,callback:function(e){t.$set(t.form,"position_id_arr",e)},expression:"form.position_id_arr"}},t._l(t.positionArr,(function(t,e){return r("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1)],1)]),r("div",{staticClass:"releaseData"},[r("el-table",{ref:"multipleSelection",staticStyle:{"margin-top":"-20px"},attrs:{border:"",data:t.releaseDataArray,size:"medium","row-class-name":t.tableRowClassName,"header-cell-style":{background:"#f5f5f5"}}},[r("el-table-column",{attrs:{label:"日期",align:"center","min-width":"120",prop:"date",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.date?e.row.date:"-"))]}}])}),r("el-table-column",{attrs:{label:"平台",align:"center","min-width":"120",prop:"media_platform_name",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.media_platform_name?e.row.media_platform_name:"-"))]}}])}),r("el-table-column",{attrs:{label:"应用",align:"center","min-width":"120",prop:"media_name",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.media_name?e.row.media_name:"-"))]}}])}),r("el-table-column",{attrs:{label:"广告位",align:"center","min-width":"120",prop:"position_name",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.position_name?e.row.position_name:"-"))]}}])}),r("el-table-column",{attrs:{label:"结算方式",align:"center","min-width":"120",prop:"bill_type"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.bill_type?r("div",[t._v("CPM")]):t._e(),2==e.row.bill_type?r("div",[t._v("CPC")]):t._e(),3==e.row.bill_type?r("div",[t._v("CPA")]):t._e(),4==e.row.bill_type?r("div",[t._v("CPS")]):t._e(),5==e.row.bill_type?r("div",[t._v("CPD")]):t._e()]}}])}),r("el-table-column",{attrs:{label:"CPA单价",align:"center","min-width":"120",prop:"cpa_reserve_price"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.cpa_reserve_price?e.row.cpa_reserve_price:"-"))]}}])}),r("el-table-column",{attrs:{label:"CPS比例",align:"center","min-width":"120",prop:"cps_reserve_price"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.cps_reserve_price?e.row.cps_reserve_price:"-"))]}}])}),r("el-table-column",{attrs:{label:"统计转化数",align:"center","min-width":"120",prop:"sum_right_dp_pv",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sum_right_dp_pv))]}}])}),r("el-table-column",{attrs:{label:"统计支出",align:"center","min-width":"120",prop:"cost",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.cost))]}}])}),r("el-table-column",{attrs:{label:"结算支出",align:"center","min-width":"120",prop:"bill_amount",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.bill_amount))]}}])})],1)],1),r("el-pagination",{staticStyle:{margin:"-10px"},attrs:{slot:"footer","current-page":t.listQuery.current,"page-size":t.listQuery.pageSize,total:t.total,"page-sizes":[10,20,40,60],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange},slot:"footer"})],2)],1)},a=[],n=(r("ac6a"),r("96cf"),r("3b8d")),s={data:function(){return{form:{media_platform_id_arr:[],media_id_arr:[],position_id_arr:[]},mediaPlatformArr:[],mediaArr:[],positionArr:[],platformFilterArr:[],mediaFilterArr:[],timeValue:[],listQuery:{pageSize:10,current:1,sort:"",order:""},total:0,releaseDataArray:[],pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()-864e5},shortcuts:[{text:"今日",onClick:function(t){var e=new Date,r=new Date;t.$emit("pick",[r,e])}},{text:"昨日",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",[e,e])}},{text:"本周",onClick:function(t){var e=new Date,r=new Date,i=e.getDay()||7;e.setTime(e.getTime()-864e5*(i-1)),t.$emit("pick",[e,r])}},{text:"上周",onClick:function(t){var e,r=new Date,i=r.getFullYear(),a=r.getMonth()+1,n=r.getDate();e=0==r.getDay()?new Date(i+"/"+a+"/"+n).getTime()-864e5*(r.getDay()+6):new Date(i+"/"+a+"/"+n).getTime()-864e5*(r.getDay()-1);var s=e-6048e5,o=e-864e5,l=new Date(s),c=new Date(o);t.$emit("pick",[l,c])}},{text:"本月",onClick:function(t){var e=new Date,r=new Date;r.setDate(1),t.$emit("pick",[r,e])}},{text:"上月",onClick:function(t){var e=new Date,r=new Date(e);r.setMonth(e.getMonth()),e.setMonth(e.getMonth()-1),r.setDate(0),e.setDate(1),t.$emit("pick",[e,r])}},{text:"最近七天",onClick:function(t){var e=new Date,r=new Date;r.setTime(r.getTime()-5184e5),t.$emit("pick",[r,e])}},{text:"最近30天",onClick:function(t){var e=new Date,r=new Date;r.setTime(r.getTime()-2592e6),t.$emit("pick",[r,e])}}]},start_date:"",end_date:""}},created:function(){this.start_date=this.$route.query.start_date,this.end_date=this.$route.query.end_date,this.getMediaPlatform(),this.getMedia(),this.getPosition(),this.getSevenDayDate(),this.fixedForm()},methods:{refreshPageClick:function(){this.fixedForm()},dateChange:function(){},releaseBtn:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post(this.baseUrl.ip1+"/cost_publish_data/data_publish",{media_platform_id_arr:this.form.media_platform_id_arr,media_id_arr:this.form.media_id_arr,position_id_arr:this.form.position_id_arr,start_date:this.start_date,end_date:this.end_date});case 2:e=t.sent,200==e.code&&this.$alert("数据发布成功后整点进行更新！","提示",{confirmButtonText:"确定",type:"info",showClose:!1,callback:function(t){r.$message({type:"success",message:"发布成功"})}});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),fixedForm:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post(this.baseUrl.ip1+"/cost_publish_data/data_preview",{media_platform_id_arr:this.form.media_platform_id_arr,media_id_arr:this.form.media_id_arr,position_id_arr:this.form.position_id_arr,page:this.listQuery.current,start_date:this.start_date,end_date:this.end_date,limit:this.listQuery.pageSize});case 2:e=t.sent,r=e.data,this.releaseDataArray=r.data,this.listQuery.current=r.current_page,this.listQuery.limit=r.per_page,this.total=r.total,this.getTotalData();case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTotalData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post(this.baseUrl.ip1+"/cost_publish_data/data_preview_total",{media_platform_id_arr:this.form.media_platform_id_arr,media_id_arr:this.form.media_id_arr,position_id_arr:this.form.position_id_arr,page:this.listQuery.current,start_date:this.start_date,end_date:this.end_date,limit:this.listQuery.pageSize});case 2:e=t.sent,r=e.data,this.releaseDataArray.unshift(r);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),tableRowClassName:function(t){t.row;var e=t.rowIndex;return 0===e?"success-row":""},handleSizeChange:function(t){this.listQuery.pageSize=t,this.listQuery.current=1,this.fixedForm()},handleCurrentChange:function(t){this.listQuery.current=t,this.fixedForm()},getSevenDayDate:function(){var t=new Date,e=new Date;e.setTime(e.getTime()-6048e5);var r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),i=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();this.timeValue=[i,r]},getMediaPlatform:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,r,i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get(this.baseUrl.ip1+"/sourceSys/options/mediaPlatform");case 2:e=t.sent,r=e.data,i=r,i.forEach((function(t){a.mediaPlatformArr.push({label:t.media_platform_name,value:t.id,id:t.id})}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),filterMedia:function(t){var e=this;this.form.media_id_arr=[],this.form.position_id_arr=[],this.platformFilterArr.splice(0,this.platformFilterArr.length),t.forEach((function(t){e.mediaPlatformArr.forEach((function(r){t==r.value&&e.platformFilterArr.push(r.id)}))})),this.getMedia(this.platformFilterArr),this.getPosition(),this.listQuery.current=1,this.fixedForm()},getMedia:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r,i,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.form.position_id_arr=[],this.mediaArr.splice(0,this.mediaArr.length),t.next=4,this.$http.post(this.baseUrl.ip1+"/sourceSys/options/media",{media_platform_id_arr:e});case 4:r=t.sent,i=r.data,a=i,a.forEach((function(t,e){n.mediaArr.push({label:t.media_name,value:t.id,id:t.id})}));case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),filterPosition:function(t){var e=this;this.form.position_id_arr=[],this.mediaFilterArr.splice(0,this.mediaFilterArr.length),t.forEach((function(t){e.mediaArr.forEach((function(r){t==r.value&&e.mediaFilterArr.push(r.id)}))})),this.getPosition(this.mediaFilterArr),this.listQuery.current=1,this.fixedForm()},getPosition:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r,i,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.positionArr.splice(0,this.positionArr.length),t.next=3,this.$http.post(this.baseUrl.ip1+"/sourceSys/options/getSelectPositionList",{media_id_arr:e});case 3:r=t.sent,i=r.data,a=i,a.forEach((function(t,e){n.positionArr.push({value:t.id,label:t.media_position_name})}));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),filterpos:function(){this.listQuery.current=1,this.fixedForm()}}},o=s,l=(r("bdbb"),r("2877")),c=function(t){t.options.__source="src/views/pages/dataFormReport/overallData/releaseData/index.vue"},u=c,d=Object(l["a"])(o,i,a,!1,null,null,null);"function"===typeof u&&u(d);e["default"]=d.exports},bdbb:function(t,e,r){"use strict";r("78ed")}}]);
//# sourceMappingURL=chunk-38e992aa.5f520e67.js.map